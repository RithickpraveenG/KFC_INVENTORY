[{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\patch-db.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'readDb' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"readDb"},"fix":{"range":[57,64],"text":""},"desc":"Remove unused variable \"readDb\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'writeDb' is defined but never used.","line":3,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":25,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"writeDb"},"fix":{"range":[48,97],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import fs from 'fs';\r\nimport path from 'path';\r\nimport { readDb, writeDb } from './src/lib/db';\r\n\r\nconst DB_PATH = path.join(process.cwd(), 'data', 'db.json');\r\n\r\nif (fs.existsSync(DB_PATH)) {\r\n    const data = JSON.parse(fs.readFileSync(DB_PATH, 'utf-8'));\r\n    if (!data.users) {\r\n        data.users = [\r\n            { id: \"u1\", username: \"admin\", \"password\": \"password\", name: \"System Admin\", role: \"ADMIN\" },\r\n            { id: \"u2\", username: \"operator\", \"password\": \"123\", name: \"John Operator\", role: \"OPERATOR\" }\r\n        ];\r\n        fs.writeFileSync(DB_PATH, JSON.stringify(data, null, 2), 'utf-8');\r\n        console.log(\"Patched db.json with default users.\");\r\n    } else {\r\n        console.log(\"db.json already has users.\");\r\n    }\r\n} else {\r\n    console.log(\"db.json not found.\");\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\scripts\\test-backup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\admin\\users\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Plus' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Plus"},"fix":{"range":[221,226],"text":""},"desc":"Remove unused variable \"Plus\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Save' is defined but never used.","line":8,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":45,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Save"},"fix":{"range":[250,256],"text":""},"desc":"Remove unused variable \"Save\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":8,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":48,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"X"},"fix":{"range":[256,259],"text":""},"desc":"Remove unused variable \"X\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogFooter' is defined but never used.","line":49,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"DialogFooter"},"fix":{"range":[1035,1054],"text":""},"desc":"Remove unused variable \"DialogFooter\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":234,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":234,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10981,10984],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10981,10984],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport * as z from \"zod\";\r\nimport { toast } from \"sonner\";\r\nimport { Plus, Trash2, UserPlus, Edit2, Save, X } from \"lucide-react\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n} from \"@/components/ui/form\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from \"@/components/ui/table\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n    DialogFooter,\r\n} from \"@/components/ui/dialog\";\r\nimport { useAuth, User } from \"@/lib/auth-context\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\n\r\n// Schema for Creating a User (Password required)\r\nconst createUserSchema = z.object({\r\n    name: z.string().min(2, \"Name is required\"),\r\n    username: z.string().min(3, \"Username must be at least 3 characters\"),\r\n    password: z.string().min(4, \"Password must be at least 4 characters\"),\r\n    role: z.enum([\"ADMIN\", \"OPERATOR\"]),\r\n});\r\n\r\n// Schema for Editing a User (Password optional)\r\nconst editUserSchema = z.object({\r\n    name: z.string().min(2, \"Name is required\"),\r\n    username: z.string().min(3, \"Username must be at least 3 characters\"),\r\n    password: z.string().optional(),\r\n    role: z.enum([\"ADMIN\", \"OPERATOR\"]),\r\n});\r\n\r\nexport default function UsersPage() {\r\n    const { users, addUser, deleteUser } = useAuth();\r\n    const [isAddOpen, setIsAddOpen] = useState(false);\r\n\r\n    // --- Add User Form ---\r\n    const addForm = useForm<z.infer<typeof createUserSchema>>({\r\n        resolver: zodResolver(createUserSchema),\r\n        defaultValues: { name: \"\", username: \"\", password: \"\", role: \"OPERATOR\" },\r\n    });\r\n\r\n    function onAddSubmit(values: z.infer<typeof createUserSchema>) {\r\n        if (users.some(u => u.username === values.username)) {\r\n            addForm.setError(\"username\", { type: \"manual\", message: \"Username already exists\" });\r\n            return;\r\n        }\r\n        addUser(values);\r\n        toast.success(\"User Created\", { description: `Added ${values.username}` });\r\n        setIsAddOpen(false);\r\n        addForm.reset();\r\n    }\r\n\r\n    return (\r\n        <div className=\"container mx-auto p-6 max-w-5xl space-y-8\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <div className=\"space-y-1\">\r\n                    <h1 className=\"text-3xl font-bold tracking-tight text-foreground\">User Management</h1>\r\n                    <p className=\"text-muted-foreground\">Manage system access for Admins and Operators.</p>\r\n                </div>\r\n\r\n                <Dialog open={isAddOpen} onOpenChange={setIsAddOpen}>\r\n                    <DialogTrigger asChild>\r\n                        <Button className=\"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm\">\r\n                            <UserPlus className=\"mr-2 h-4 w-4\" /> Add User\r\n                        </Button>\r\n                    </DialogTrigger>\r\n                    <DialogContent>\r\n                        <DialogHeader>\r\n                            <DialogTitle>Create New User</DialogTitle>\r\n                            <DialogDescription>Add a new user to the system.</DialogDescription>\r\n                        </DialogHeader>\r\n                        <Form {...addForm}>\r\n                            <form onSubmit={addForm.handleSubmit(onAddSubmit)} className=\"space-y-4 py-4\">\r\n                                <FormField\r\n                                    control={addForm.control}\r\n                                    name=\"name\"\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <FormLabel>Full Name</FormLabel>\r\n                                            <FormControl><Input placeholder=\"John Doe\" {...field} /></FormControl>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n                                <FormField\r\n                                    control={addForm.control}\r\n                                    name=\"username\"\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <FormLabel>Username</FormLabel>\r\n                                            <FormControl><Input placeholder=\"johndoe\" {...field} /></FormControl>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n                                <FormField\r\n                                    control={addForm.control}\r\n                                    name=\"password\"\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <FormLabel>Password</FormLabel>\r\n                                            <FormControl><Input type=\"password\" placeholder=\"••••\" {...field} /></FormControl>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n                                <FormField\r\n                                    control={addForm.control}\r\n                                    name=\"role\"\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <FormLabel>Role</FormLabel>\r\n                                            <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                                <FormControl><SelectTrigger><SelectValue /></SelectTrigger></FormControl>\r\n                                                <SelectContent>\r\n                                                    <SelectItem value=\"ADMIN\">Admin</SelectItem>\r\n                                                    <SelectItem value=\"OPERATOR\">Operator</SelectItem>\r\n                                                </SelectContent>\r\n                                            </Select>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n                                <Button type=\"submit\" className=\"w-full bg-primary text-primary-foreground hover:bg-primary/90\">Create Account</Button>\r\n                            </form>\r\n                        </Form>\r\n                    </DialogContent>\r\n                </Dialog>\r\n            </div>\r\n\r\n            <Card className=\"border-border shadow-sm\">\r\n                <CardHeader>\r\n                    <CardTitle className=\"text-foreground\">Existing Users</CardTitle>\r\n                    <CardDescription className=\"text-muted-foreground\">List of all users with access to the platform.</CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <Table>\r\n                        <TableHeader>\r\n                            <TableRow className=\"border-border hover:bg-transparent\">\r\n                                <TableHead className=\"font-semibold text-foreground\">Name</TableHead>\r\n                                <TableHead className=\"font-semibold text-foreground\">Username</TableHead>\r\n                                <TableHead className=\"font-semibold text-foreground\">Role</TableHead>\r\n                                <TableHead className=\"text-right font-semibold text-foreground\">Actions</TableHead>\r\n                            </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                            {users.map((u) => (\r\n                                <TableRow key={u.id} className=\"border-border hover:bg-muted/50\">\r\n                                    <TableCell className=\"font-medium text-foreground\">{u.name}</TableCell>\r\n                                    <TableCell className=\"text-muted-foreground\">{u.username}</TableCell>\r\n                                    <TableCell>\r\n                                        <Badge className={u.role === 'ADMIN' ? 'bg-indigo-100 text-indigo-700 hover:bg-indigo-100 border-indigo-200' : 'bg-blue-100 text-blue-700 hover:bg-blue-100 border-blue-200'}>\r\n                                            {u.role}\r\n                                        </Badge>\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-right space-x-2\">\r\n                                        <EditUserDialog user={u} />\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"text-muted-foreground hover:text-destructive hover:bg-destructive/10\"\r\n                                            onClick={() => {\r\n                                                if (confirm(`Are you sure you want to delete user ${u.username}?`)) {\r\n                                                    deleteUser(u.id);\r\n                                                }\r\n                                            }}\r\n                                        >\r\n                                            <Trash2 className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n                        </TableBody>\r\n                    </Table>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction EditUserDialog({ user }: { user: User }) {\r\n    const { updateUser } = useAuth();\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const editForm = useForm<z.infer<typeof editUserSchema>>({\r\n        resolver: zodResolver(editUserSchema),\r\n        defaultValues: {\r\n            name: user.name,\r\n            username: user.username,\r\n            role: user.role,\r\n            password: \"\",\r\n        },\r\n    });\r\n\r\n    function onEditSubmit(values: z.infer<typeof editUserSchema>) {\r\n        const updates: any = { ...values };\r\n        if (!values.password) delete updates.password; // Don't update password if empty\r\n\r\n        updateUser(user.id, updates);\r\n        toast.success(\"User Updated\");\r\n        setOpen(false);\r\n    }\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            <DialogTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"text-muted-foreground hover:text-primary hover:bg-primary/10\">\r\n                    <Edit2 className=\"h-4 w-4\" />\r\n                </Button>\r\n            </DialogTrigger>\r\n            <DialogContent>\r\n                <DialogHeader>\r\n                    <DialogTitle>Edit User: {user.username}</DialogTitle>\r\n                    <DialogDescription>Update user details. Leave password blank to keep unchanged.</DialogDescription>\r\n                </DialogHeader>\r\n                <Form {...editForm}>\r\n                    <form onSubmit={editForm.handleSubmit(onEditSubmit)} className=\"space-y-4 py-4\">\r\n                        <FormField\r\n                            control={editForm.control}\r\n                            name=\"name\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Full Name</FormLabel>\r\n                                    <FormControl><Input {...field} /></FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                        <FormField\r\n                            control={editForm.control}\r\n                            name=\"username\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Username</FormLabel>\r\n                                    <FormControl><Input {...field} disabled className=\"bg-slate-100\" /></FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                        <FormField\r\n                            control={editForm.control}\r\n                            name=\"password\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>New Password (Optional)</FormLabel>\r\n                                    <FormControl><Input type=\"password\" placeholder=\"Enter to change\" {...field} /></FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                        <FormField\r\n                            control={editForm.control}\r\n                            name=\"role\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Role</FormLabel>\r\n                                    <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                        <FormControl><SelectTrigger><SelectValue /></SelectTrigger></FormControl>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"ADMIN\">Admin</SelectItem>\r\n                                            <SelectItem value=\"OPERATOR\">Operator</SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                        <Button type=\"submit\" className=\"w-full bg-blue-600 hover:bg-blue-700\">Save Changes</Button>\r\n                    </form>\r\n                </Form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\api\\auth\\users\\[id]\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[442,445],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[442,445],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1035,1038],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1035,1038],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1305,1308],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1305,1308],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server';\r\nimport { readDb, writeDb } from '@/lib/db';\r\n\r\nexport async function PUT(request: NextRequest, { params }: { params: Promise<{ id: string }> }) {\r\n    const { id } = await params;\r\n    const body = await request.json();\r\n    const db = readDb();\r\n\r\n    if (!db.users) return NextResponse.json({ error: 'No users found' }, { status: 404 });\r\n\r\n    const index = db.users.findIndex((u: any) => u.id === id);\r\n    if (index === -1) {\r\n        return NextResponse.json({ error: 'User not found' }, { status: 404 });\r\n    }\r\n\r\n    // Update the user\r\n    db.users[index] = { ...db.users[index], ...body };\r\n    writeDb(db);\r\n\r\n    return NextResponse.json(db.users[index]);\r\n}\r\n\r\n\r\nexport async function DELETE(request: NextRequest, { params }: { params: Promise<{ id: string }> }) {\r\n    const { id } = await params;\r\n    const db = readDb();\r\n\r\n    if (!db.users) return NextResponse.json({ error: 'No users found' }, { status: 404 });\r\n\r\n    const index = db.users.findIndex((u: any) => u.id === id);\r\n    if (index === -1) {\r\n        return NextResponse.json({ error: 'User not found' }, { status: 404 });\r\n    }\r\n\r\n    // Prevent deleting the last admin\r\n    if (db.users[index].role === 'ADMIN') {\r\n        const adminCount = db.users.filter((u: any) => u.role === 'ADMIN').length;\r\n        if (adminCount <= 1) {\r\n            return NextResponse.json({ error: 'Cannot delete the only Admin user.' }, { status: 400 });\r\n        }\r\n    }\r\n\r\n    // Remove the user\r\n    const deletedUser = db.users.splice(index, 1)[0];\r\n    writeDb(db);\r\n\r\n    return NextResponse.json(deletedUser);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\api\\auth\\users\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\api\\batch-id\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[462,465],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[462,465],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[576,579],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[576,579],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\r\nimport { readDb } from '@/lib/db';\r\n\r\nexport const dynamic = 'force-dynamic';\r\n\r\nexport async function GET() {\r\n    try {\r\n        const db = readDb();\r\n        const logs = db.productionLogs || [];\r\n        const currentYear = new Date().getFullYear();\r\n        const prefix = `B-${currentYear}-`;\r\n\r\n        // Filter logs for current year and exclude non-conforming IDs\r\n        const yearLogs = logs.filter((log: any) => log.batchId && log.batchId.startsWith(prefix));\r\n\r\n        let maxId = 0;\r\n        yearLogs.forEach((log: any) => {\r\n            const parts = log.batchId.split('-');\r\n            if (parts.length === 3) {\r\n                const num = parseInt(parts[2], 10);\r\n                if (!isNaN(num) && num > maxId) {\r\n                    maxId = num;\r\n                }\r\n            }\r\n        });\r\n\r\n        // Increment ID\r\n        const nextNum = maxId + 1;\r\n        const nextId = `${prefix}${String(nextNum).padStart(4, '0')}`;\r\n\r\n        return NextResponse.json({ id: nextId });\r\n    } catch (error) {\r\n        console.error(\"Failed to generate batch ID:\", error);\r\n        // Fallback to timestamp if error\r\n        return NextResponse.json({ id: `B-${new Date().getFullYear()}-${Date.now().toString().slice(-4)}` });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\api\\inventory\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[443,446],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[443,446],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[958,961],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[958,961],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2163,2166],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2163,2166],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":69,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":69,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2858,2861],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2858,2861],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":91,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":91,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":150,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":150,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":171,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":171,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6547,6550],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6547,6550],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":179,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":179,"endColumn":19}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server';\r\nimport fs from 'fs';\r\nimport path from 'path';\r\nimport { DispatchRecord, ProductStock } from '@/types/inventory';\r\nimport { ProductionRecord } from '@/types';\r\n\r\nconst dataFilePath = path.join(process.cwd(), 'data', 'db.json');\r\n\r\nfunction getData() {\r\n    const fileContents = fs.readFileSync(dataFilePath, 'utf8');\r\n    return JSON.parse(fileContents);\r\n}\r\n\r\nfunction saveData(data: any) {\r\n    fs.writeFileSync(dataFilePath, JSON.stringify(data, null, 2));\r\n}\r\n\r\n// GET: Calculate and return stock for all products\r\nexport async function GET(request: NextRequest) {\r\n    try {\r\n        const { searchParams } = new URL(request.url);\r\n        const format = searchParams.get('format');\r\n\r\n        const data = getData();\r\n        const productionLogs: ProductionRecord[] = data.productionLogs || [];\r\n        const dispatchLogs: DispatchRecord[] = data.dispatchLogs || [];\r\n        const products: any[] = data.products || []; // Read products to get minStock\r\n\r\n        // 1. Calculate Total Produced\r\n        const producedMap: Record<string, number> = {};\r\n        productionLogs.forEach(log => {\r\n            // Handle potentially different log attributes (legacy vs new)\r\n            // The db.json shows 'componentProduced' and 'quantityProduced'\r\n            const prodName = log.componentProduced || (log.finishedProduct && log.finishedProduct.name) || 'Unknown';\r\n            const quantity = log.quantityProduced || (log.finishedProduct && log.finishedProduct.quantity) || 0;\r\n\r\n            if (prodName !== 'Unknown') {\r\n                producedMap[prodName] = (producedMap[prodName] || 0) + quantity;\r\n            }\r\n        });\r\n\r\n        // 2. Calculate Total Dispatched\r\n        const dispatchedMap: Record<string, number> = {};\r\n        dispatchLogs.forEach(log => {\r\n            const prodName = log.productName;\r\n            dispatchedMap[prodName] = (dispatchedMap[prodName] || 0) + log.quantity;\r\n        });\r\n\r\n        // 3. Combine into Stock Report\r\n        // Iterate over ALL defined products from Master Data\r\n        const stockReport: ProductStock[] = products.map((product: any) => {\r\n            const name = product.name;\r\n            const totalProduced = producedMap[name] || 0;\r\n            const totalDispatched = dispatchedMap[name] || 0;\r\n            const minStockLevel = product.minStockLevel || 50;\r\n\r\n            return {\r\n                name,\r\n                totalProduced,\r\n                totalDispatched,\r\n                currentStock: totalProduced - totalDispatched,\r\n                minStockLevel,\r\n                type: product.type || 'FINISHED'\r\n            };\r\n        });\r\n\r\n        // Also include items found in logs but NOT in products (legacy checks)\r\n        Object.keys(producedMap).forEach(name => {\r\n            if (!products.find((p: any) => p.name === name)) {\r\n                const totalProduced = producedMap[name] || 0;\r\n                const totalDispatched = dispatchedMap[name] || 0;\r\n                stockReport.push({\r\n                    name,\r\n                    totalProduced,\r\n                    totalDispatched,\r\n                    currentStock: totalProduced - totalDispatched,\r\n                    minStockLevel: 50, // Default since not in Master Data\r\n                    type: 'FINISHED'\r\n                });\r\n            }\r\n        });\r\n\r\n        if (format === 'full') {\r\n            return NextResponse.json({\r\n                stock: stockReport,\r\n                history: dispatchLogs.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime())\r\n            });\r\n        }\r\n\r\n        return NextResponse.json(stockReport);\r\n    } catch (error) {\r\n        return NextResponse.json({ error: 'Failed to fetch inventory' }, { status: 500 });\r\n    }\r\n}\r\n\r\n// POST: Create a new Dispatch Record\r\nexport async function POST(request: NextRequest) {\r\n    try {\r\n        const body = await request.json();\r\n        const { date, productName, quantity, destination, destinationDetail, notes } = body;\r\n\r\n        const data = getData();\r\n\r\n        // --- VALIDATION: Check for sufficient stock ---\r\n        const productionLogs: ProductionRecord[] = data.productionLogs || [];\r\n        const dispatchLogs: DispatchRecord[] = data.dispatchLogs || [];\r\n\r\n        const totalProduced = productionLogs\r\n            .filter(p => {\r\n                const pName = p.componentProduced || (p.finishedProduct && p.finishedProduct.name);\r\n                return pName === productName;\r\n            })\r\n            .reduce((sum, p) => {\r\n                const qty = p.quantityProduced || (p.finishedProduct && p.finishedProduct.quantity) || 0;\r\n                return sum + qty;\r\n            }, 0);\r\n\r\n        const totalDispatched = dispatchLogs\r\n            .filter(d => d.productName === productName)\r\n            .reduce((sum, d) => sum + d.quantity, 0);\r\n\r\n        const currentStock = totalProduced - totalDispatched;\r\n\r\n        if (quantity > currentStock) {\r\n            return NextResponse.json(\r\n                { error: `Insufficient stock. Available: ${currentStock}, Requested: ${quantity}` },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        // --- CREATE RECORD ---\r\n        const newDispatch: DispatchRecord = {\r\n            id: `DIS-${Date.now()}`,\r\n            date,\r\n            productName,\r\n            quantity: Number(quantity),\r\n            destination,\r\n            destinationDetail: destinationDetail || '',\r\n            notes: notes || '',\r\n            timestamp: new Date().toISOString()\r\n        };\r\n\r\n        if (!data.dispatchLogs) {\r\n            data.dispatchLogs = [];\r\n        }\r\n        data.dispatchLogs.push(newDispatch);\r\n        saveData(data);\r\n\r\n        return NextResponse.json(newDispatch);\r\n    } catch (error) {\r\n        return NextResponse.json({ error: 'Failed to create dispatch record' }, { status: 500 });\r\n    }\r\n}\r\n\r\n// DELETE: Remove a Dispatch Record\r\nexport async function DELETE(request: NextRequest) {\r\n    try {\r\n        const { searchParams } = new URL(request.url);\r\n        const id = searchParams.get('id');\r\n\r\n        if (!id) {\r\n            return NextResponse.json({ error: 'ID is required' }, { status: 400 });\r\n        }\r\n\r\n        const data = getData();\r\n        if (!data.dispatchLogs) {\r\n            return NextResponse.json({ error: 'No records found' }, { status: 404 });\r\n        }\r\n\r\n        const initialLength = data.dispatchLogs.length;\r\n        data.dispatchLogs = data.dispatchLogs.filter((log: any) => log.id !== id);\r\n\r\n        if (data.dispatchLogs.length === initialLength) {\r\n            return NextResponse.json({ error: 'Record not found' }, { status: 404 });\r\n        }\r\n\r\n        saveData(data);\r\n        return NextResponse.json({ success: true });\r\n    } catch (error) {\r\n        return NextResponse.json({ error: 'Failed to delete record' }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\api\\master\\materials\\[id]\\route.ts","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: Unterminated template literal.","line":37,"column":0}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"```typescript\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { readDb, writeDb } from '@/lib/db';\r\n\r\nexport async function PUT(request: NextRequest, { params }: { params: Promise<{ id: string }> }) {\r\n    const { id } = await params;\r\n    const body = await request.json();\r\n    const db = readDb();\r\n\r\n    const index = db.materials.findIndex((m: any) => m.id === id);\r\n    if (index === -1) {\r\n        return NextResponse.json({ error: 'Material not found' }, { status: 404 });\r\n    }\r\n\r\n    // Update the item\r\n    db.materials[index] = { ...db.materials[index], ...body };\r\n    writeDb(db);\r\n\r\n    return NextResponse.json(db.materials[index]);\r\n}\r\n\r\nexport async function DELETE(request: NextRequest, { params }: { params: Promise<{ id: string }> }) {\r\n    const { id } = await params;\r\n    const db = readDb();\r\n\r\n    const initialLength = db.materials.length;\r\n    db.materials = db.materials.filter((m: any) => m.id !== id);\r\n\r\n    if (db.materials.length === initialLength) {\r\n        return NextResponse.json({ error: 'Material not found' }, { status: 404 });\r\n    }\r\n\r\n    writeDb(db);\r\n\r\n    return NextResponse.json({ success: true });\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\api\\master\\materials\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\api\\master\\operators\\[id]\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[353,356],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[353,356],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[918,921],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[918,921],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server';\r\nimport { readDb, writeDb } from '@/lib/db';\r\n\r\nexport async function PUT(request: NextRequest, { params }: { params: Promise<{ id: string }> }) {\r\n    const { id } = await params;\r\n    const body = await request.json();\r\n    const db = readDb();\r\n\r\n    const index = db.operators.findIndex((op: any) => op.id === id);\r\n    if (index === -1) {\r\n        return NextResponse.json({ error: 'Operator not found' }, { status: 404 });\r\n    }\r\n\r\n    // Update the item\r\n    db.operators[index] = { ...db.operators[index], ...body };\r\n    writeDb(db);\r\n\r\n    return NextResponse.json(db.operators[index]);\r\n}\r\n\r\nexport async function DELETE(request: NextRequest, { params }: { params: Promise<{ id: string }> }) {\r\n    const { id } = await params;\r\n    const db = readDb();\r\n\r\n    const initialLength = db.operators.length;\r\n    db.operators = db.operators.filter((op: any) => op.id !== id);\r\n\r\n    if (db.operators.length === initialLength) {\r\n        return NextResponse.json({ error: 'Operator not found' }, { status: 404 });\r\n    }\r\n\r\n    writeDb(db);\r\n\r\n    return NextResponse.json({ success: true });\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\api\\master\\operators\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\api\\master\\products\\[id]\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[351,354],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[351,354],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[907,910],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[907,910],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server';\r\nimport { readDb, writeDb } from '@/lib/db';\r\n\r\nexport async function PUT(request: NextRequest, { params }: { params: Promise<{ id: string }> }) {\r\n    const { id } = await params;\r\n    const body = await request.json();\r\n    const db = readDb();\r\n\r\n    const index = db.products.findIndex((p: any) => p.id === id);\r\n    if (index === -1) {\r\n        return NextResponse.json({ error: 'Product not found' }, { status: 404 });\r\n    }\r\n\r\n    // Update the item\r\n    db.products[index] = { ...db.products[index], ...body };\r\n    writeDb(db);\r\n\r\n    return NextResponse.json(db.products[index]);\r\n}\r\n\r\nexport async function DELETE(request: NextRequest, { params }: { params: Promise<{ id: string }> }) {\r\n    const { id } = await params;\r\n    const db = readDb();\r\n\r\n    const initialLength = db.products.length;\r\n    db.products = db.products.filter((p: any) => p.id !== id);\r\n\r\n    if (db.products.length === initialLength) {\r\n        return NextResponse.json({ error: 'Product not found' }, { status: 404 });\r\n    }\r\n\r\n    writeDb(db);\r\n\r\n    return NextResponse.json({ success: true });\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\api\\master\\products\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\api\\production\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1337,1340],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1337,1340],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":54,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server';\r\nimport { readDb, writeDb } from '@/lib/db';\r\n\r\nexport async function GET() {\r\n    const db = readDb();\r\n    return NextResponse.json(db.productionLogs || []);\r\n}\r\n\r\nexport async function POST(request: NextRequest) {\r\n    const body = await request.json();\r\n    console.log(\"Received production log request:\", body);\r\n    const db = readDb();\r\n\r\n    // Ensure productionLogs exists\r\n    if (!db.productionLogs) {\r\n        db.productionLogs = [];\r\n    }\r\n\r\n    const newLog = {\r\n        ...body,\r\n        id: body.id || `LOG-${Date.now()}`,\r\n        timestamp: new Date().toISOString()\r\n    };\r\n\r\n    db.productionLogs.push(newLog);\r\n    writeDb(db);\r\n\r\n    return NextResponse.json(newLog, { status: 201 });\r\n}\r\n\r\nexport async function DELETE(request: NextRequest) {\r\n    try {\r\n        const { searchParams } = new URL(request.url);\r\n        const id = searchParams.get('id');\r\n\r\n        if (!id) {\r\n            return NextResponse.json({ error: 'ID is required' }, { status: 400 });\r\n        }\r\n\r\n        const db = readDb();\r\n        if (!db.productionLogs) {\r\n            return NextResponse.json({ error: 'No records found' }, { status: 404 });\r\n        }\r\n\r\n        const initialLength = db.productionLogs.length;\r\n        db.productionLogs = db.productionLogs.filter((log: any) => log.id !== id);\r\n\r\n        if (db.productionLogs.length === initialLength) {\r\n            return NextResponse.json({ error: 'Record not found' }, { status: 404 });\r\n        }\r\n\r\n        writeDb(db);\r\n        return NextResponse.json({ success: true });\r\n    } catch (error) {\r\n        return NextResponse.json({ error: 'Failed to delete record' }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\dispatch\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":121,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":121,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport * as z from \"zod\";\r\nimport { toast } from \"sonner\";\r\nimport { useMasterData } from \"@/lib/master-data-context\";\r\nimport { Truck, CheckCircle2, AlertTriangle, ArrowLeft } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormDescription,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n} from \"@/components/ui/form\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { ProductStock } from \"@/types/inventory\";\r\nimport Link from \"next/link\";\r\n\r\nconst dispatchSchema = z.object({\r\n    date: z.string().min(1, \"Date is required\"),\r\n    productName: z.string().min(1, \"Select a product\"),\r\n    quantity: z.coerce.number().min(1, \"Quantity must be at least 1\"),\r\n    destination: z.enum([\"Plating\", \"Customer\"]),\r\n    destinationDetail: z.string().optional(),\r\n    notes: z.string().optional(),\r\n});\r\n\r\nexport default function DispatchPage() {\r\n    const { products } = useMasterData();\r\n    const [stockData, setStockData] = useState<ProductStock[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const form = useForm<z.infer<typeof dispatchSchema>>({\r\n        resolver: zodResolver(dispatchSchema),\r\n        defaultValues: {\r\n            date: new Date().toISOString().split(\"T\")[0],\r\n            productName: \"\",\r\n            quantity: 0,\r\n            destination: \"Customer\",\r\n            destinationDetail: \"\",\r\n            notes: \"\",\r\n        },\r\n    });\r\n\r\n    const fetchStock = async () => {\r\n        try {\r\n            const res = await fetch('/api/inventory');\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setStockData(data);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to fetch stock\", error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchStock();\r\n    }, []);\r\n\r\n    const selectedProduct = form.watch(\"productName\");\r\n    const currentStock = stockData.find(s => s.name === selectedProduct)?.currentStock || 0;\r\n\r\n    async function onSubmit(values: z.infer<typeof dispatchSchema>) {\r\n        if (values.quantity > currentStock) {\r\n            form.setError(\"quantity\", {\r\n                type: \"manual\",\r\n                message: `Insufficient stock! Max available: ${currentStock}`\r\n            });\r\n            toast.error(\"Insufficient Stock\", {\r\n                description: `You only have ${currentStock} units of ${values.productName}.`\r\n            });\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            const res = await fetch('/api/inventory', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(values)\r\n            });\r\n\r\n            if (res.ok) {\r\n                toast.success(\"Dispatch Recorded\", {\r\n                    description: `${values.quantity} units of ${values.productName} sent to ${values.destination}.`,\r\n                    icon: <CheckCircle2 className=\"h-4 w-4 text-emerald-600\" />,\r\n                });\r\n                form.reset({\r\n                    date: new Date().toISOString().split(\"T\")[0],\r\n                    productName: \"\",\r\n                    quantity: 0,\r\n                    destination: \"Customer\",\r\n                    destinationDetail: \"\",\r\n                    notes: \"\",\r\n                });\r\n                fetchStock(); // Refresh stock data\r\n            } else {\r\n                const err = await res.json();\r\n                toast.error(\"Dispatch Failed\", { description: err.error });\r\n            }\r\n        } catch (error) {\r\n            toast.error(\"Network Error\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-8 max-w-2xl mx-auto py-8 px-4\">\r\n            <div className=\"flex items-center gap-4 mb-4\">\r\n                <Link href=\"/entry\">\r\n                    <Button variant=\"ghost\" size=\"icon\">\r\n                        <ArrowLeft className=\"h-5 w-5\" />\r\n                    </Button>\r\n                </Link>\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold tracking-tight text-foreground\">Dispatch Entry</h1>\r\n                    <p className=\"text-muted-foreground\">Record finished goods leaving the facility.</p>\r\n                </div>\r\n            </div>\r\n\r\n            <Card className=\"border-blue-500/20 shadow-lg shadow-blue-500/5\">\r\n                <div className=\"h-2 bg-blue-500 w-full rounded-t-xl\"></div>\r\n                <CardHeader>\r\n                    <CardTitle className=\"flex items-center gap-2 text-blue-600\">\r\n                        <Truck className=\"h-5 w-5\" /> New Dispatch\r\n                    </CardTitle>\r\n                    <CardDescription>\r\n                        Enter details for outgoing shipment.\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <Form {...form}>\r\n                        <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                <FormField\r\n                                    control={form.control}\r\n                                    name=\"date\"\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <FormLabel>Date</FormLabel>\r\n                                            <FormControl><Input type=\"date\" {...field} /></FormControl>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n                                <FormField\r\n                                    control={form.control}\r\n                                    name=\"destination\"\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <FormLabel>Destination Type</FormLabel>\r\n                                            <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                                <FormControl><SelectTrigger><SelectValue /></SelectTrigger></FormControl>\r\n                                                <SelectContent>\r\n                                                    <SelectItem value=\"Customer\">Customer</SelectItem>\r\n                                                    <SelectItem value=\"Plating\">Plating Vendor</SelectItem>\r\n                                                </SelectContent>\r\n                                            </Select>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n                            </div>\r\n\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"productName\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Product to Dispatch</FormLabel>\r\n                                        <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                            <FormControl><SelectTrigger><SelectValue placeholder=\"Select Product\" /></SelectTrigger></FormControl>\r\n                                            <SelectContent>\r\n                                                {products\r\n                                                    .filter(p => p.type === 'FINISHED') // Optionally filter to finished goods only\r\n                                                    .map((p) => (\r\n                                                        <SelectItem key={p.id} value={p.name}>{p.name}</SelectItem>\r\n                                                    ))}\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                        {field.value && (\r\n                                            <div className={`text-sm mt-2 font-medium flex items-center gap-2 ${currentStock > 0 ? 'text-emerald-600' : 'text-red-500'}`}>\r\n                                                {currentStock > 0 ? <CheckCircle2 className=\"h-4 w-4\" /> : <AlertTriangle className=\"h-4 w-4\" />}\r\n                                                Available Stock: {currentStock} units\r\n                                            </div>\r\n                                        )}\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                <FormField\r\n                                    control={form.control}\r\n                                    name=\"quantity\"\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <FormLabel>Quantity</FormLabel>\r\n                                            <FormControl><Input type=\"number\" {...field} /></FormControl>\r\n                                            <FormDescription>Cannot exceed {currentStock} available.</FormDescription>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n                                <FormField\r\n                                    control={form.control}\r\n                                    name=\"destinationDetail\"\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <FormLabel>Destination Name</FormLabel>\r\n                                            <FormControl><Input placeholder=\"e.g. ABC Corp\" {...field} /></FormControl>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n                            </div>\r\n\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"notes\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Notes</FormLabel>\r\n                                        <FormControl><Input placeholder=\"Additional comments...\" {...field} /></FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n\r\n                            <Button type=\"submit\" disabled={loading} className=\"w-full bg-blue-600 hover:bg-blue-700 text-white py-6 text-lg font-semibold shadow-lg shadow-blue-500/20\">\r\n                                {loading ? \"Processing...\" : \"Confirm Dispatch\"}\r\n                            </Button>\r\n                        </form>\r\n                    </Form>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\entry\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FormDescription' is defined but never used.","line":25,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":20,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"FormDescription"},"fix":{"range":[549,571],"text":""},"desc":"Remove unused variable \"FormDescription\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Package' is defined but never used.","line":56,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":25,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Package"},"fix":{"range":[1234,1243],"text":""},"desc":"Remove unused variable \"Package\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Save' is defined but never used.","line":56,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":31,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Save"},"fix":{"range":[1243,1249],"text":""},"desc":"Remove unused variable \"Save\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckSquare' is defined but never used.","line":56,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":65,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CheckSquare"},"fix":{"range":[1270,1283],"text":""},"desc":"Remove unused variable \"CheckSquare\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Circle' is defined but never used.","line":56,"column":67,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":73,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Circle"},"fix":{"range":[1283,1291],"text":""},"desc":"Remove unused variable \"Circle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":56,"column":75,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":85,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ArrowRight"},"fix":{"range":[1291,1303],"text":""},"desc":"Remove unused variable \"ArrowRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Truck' is defined but never used.","line":56,"column":94,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":99,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Truck"},"fix":{"range":[1310,1317],"text":""},"desc":"Remove unused variable \"Truck\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used.","line":56,"column":101,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":114,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AlertTriangle"},"fix":{"range":[1317,1332],"text":""},"desc":"Remove unused variable \"AlertTriangle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":56,"column":142,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":148,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Filter"},"fix":{"range":[1358,1366],"text":""},"desc":"Remove unused variable \"Filter\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'dispatchSchema' is assigned a value but never used.","line":72,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":72,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'view' is assigned a value but never used.","line":99,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setView' is assigned a value but never used.","line":99,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":106,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3186,3189],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3186,3189],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'stockData' is assigned a value but never used.","line":107,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":107,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'nextBatchId' is assigned a value but never used.","line":113,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":113,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3729,3732],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3729,3732],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":128,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":128,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4070,4073],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4070,4073],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":162,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":162,"endColumn":23},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'generateBatchId'. Either include it or remove the dependency array.","line":171,"column":8,"nodeType":"ArrayExpression","endLine":171,"endColumn":30,"suggestions":[{"desc":"Update the dependencies array to be: [generateBatchId, isNewBatchDialogOpen]","fix":{"range":[5395,5417],"text":"[generateBatchId, isNewBatchDialogOpen]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":245,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":245,"endColumn":23},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":352,"column":73,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[15047,15065],"text":"Today&apos;s Production"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[15047,15065],"text":"Today&lsquo;s Production"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[15047,15065],"text":"Today&#39;s Production"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[15047,15065],"text":"Today&rsquo;s Production"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":405,"column":84,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[18249,18310],"text":"Batches currently on the floor. Click &apos;Complete' to finalize."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[18249,18310],"text":"Batches currently on the floor. Click &lsquo;Complete' to finalize."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[18249,18310],"text":"Batches currently on the floor. Click &#39;Complete' to finalize."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[18249,18310],"text":"Batches currently on the floor. Click &rsquo;Complete' to finalize."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":405,"column":93,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[18249,18310],"text":"Batches currently on the floor. Click 'Complete&apos; to finalize."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[18249,18310],"text":"Batches currently on the floor. Click 'Complete&lsquo; to finalize."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[18249,18310],"text":"Batches currently on the floor. Click 'Complete&#39; to finalize."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[18249,18310],"text":"Batches currently on the floor. Click 'Complete&rsquo; to finalize."},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport * as z from \"zod\";\r\nimport { toast } from \"sonner\";\r\nimport { useMasterData } from \"@/lib/master-data-context\";\r\nimport {\r\n    Tabs,\r\n    TabsContent,\r\n    TabsList,\r\n    TabsTrigger,\r\n} from \"@/components/ui/tabs\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormDescription,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n} from \"@/components/ui/form\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from \"@/components/ui/table\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport { Layers, Package, Save, CheckCircle2, Clock, CheckSquare, Circle, ArrowRight, Check, Truck, AlertTriangle, Plus, FileText, Calendar, Filter } from \"lucide-react\";\r\n\r\n// --- Types & Schema ---\r\nconst rawMaterialSchema = z.object({\r\n    date: z.string().min(1, \"Date is required\"),\r\n    operator: z.string().min(2, \"Operator name is required\"),\r\n    batchId: z.string().min(3, \"Batch ID is required\"),\r\n    materialName: z.string().min(1, \"Select a material\"),\r\n    quantity: z.coerce.number().gt(0, \"Quantity must be greater than 0\"),\r\n});\r\n\r\nconst productionSchema = z.object({\r\n    productName: z.string().min(1, \"Select a product\"),\r\n    unitsProduced: z.coerce.number().int().min(1, \"Units must be at least 1\"),\r\n});\r\n\r\nconst dispatchSchema = z.object({\r\n    date: z.string().min(1, \"Date is required\"),\r\n    productName: z.string().min(1, \"Select a product\"),\r\n    quantity: z.coerce.number().min(1, \"Quantity must be at least 1\"),\r\n    destination: z.enum([\"Plating\", \"Customer\"]),\r\n    destinationDetail: z.string().optional(),\r\n    notes: z.string().optional(),\r\n});\r\n\r\ninterface PendingBatch {\r\n    id: string;\r\n    date: string;\r\n    operator: string;\r\n    materialName: string;\r\n    quantity: number;\r\n    status: 'PENDING';\r\n}\r\n\r\ninterface ProductStock {\r\n    name: string;\r\n    totalProduced: number;\r\n    totalDispatched: number;\r\n    currentStock: number;\r\n}\r\n\r\nexport default function EntryPage() {\r\n    const { materials, products, operators } = useMasterData();\r\n    const [view, setView] = useState<'list' | 'dispatch'>('list'); // 'list' allows toggling between history/pending\r\n    const [activeTab, setActiveTab] = useState(\"pending\");\r\n\r\n    // Data State\r\n    const [pendingBatches, setPendingBatches] = useState<PendingBatch[]>([\r\n        { id: \"B-2024-001\", date: \"2024-10-25\", operator: \"John Doe\", materialName: \"Steel Sheet\", quantity: 120.5, status: 'PENDING' },\r\n    ]);\r\n    const [productionLogs, setProductionLogs] = useState<any[]>([]);\r\n    const [stockData, setStockData] = useState<ProductStock[]>([]);\r\n\r\n    // UI State\r\n    const [isCompletionDialogOpen, setIsCompletionDialogOpen] = useState(false);\r\n    const [isNewBatchDialogOpen, setIsNewBatchDialogOpen] = useState(false);\r\n    const [selectedBatch, setSelectedBatch] = useState<PendingBatch | null>(null);\r\n    const [nextBatchId, setNextBatchId] = useState(\"\");\r\n\r\n    // --- Forms ---\r\n    const rmForm = useForm<z.infer<typeof rawMaterialSchema>>({\r\n        resolver: zodResolver(rawMaterialSchema) as any,\r\n        defaultValues: {\r\n            date: new Date().toISOString().split(\"T\")[0],\r\n            operator: \"\",\r\n            batchId: \"\",\r\n            materialName: \"\",\r\n            quantity: 0,\r\n        },\r\n    });\r\n\r\n    const prodForm = useForm<z.infer<typeof productionSchema>>({\r\n        resolver: zodResolver(productionSchema) as any,\r\n        defaultValues: {\r\n            productName: \"\",\r\n            unitsProduced: 0,\r\n        },\r\n    });\r\n\r\n    // Fetch Stock & Logs\r\n    const fetchData = async () => {\r\n        try {\r\n            const [stockRes, prodRes] = await Promise.all([\r\n                fetch('/api/inventory'),\r\n                fetch('/api/production')\r\n            ]);\r\n            if (stockRes.ok) setStockData(await stockRes.json());\r\n            if (prodRes.ok) setProductionLogs(await prodRes.json());\r\n        } catch (error) {\r\n            console.error(\"Failed to fetch data\", error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    // --- Batch ID Logic ---\r\n    const generateBatchId = async () => {\r\n        try {\r\n            const res = await fetch('/api/batch-id');\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setNextBatchId(data.id);\r\n                rmForm.setValue(\"batchId\", data.id);\r\n            }\r\n        } catch (error) {\r\n            const fallbackId = `B-${new Date().getFullYear()}-${Math.floor(1000 + Math.random() * 9000)}`;\r\n            setNextBatchId(fallbackId);\r\n            rmForm.setValue(\"batchId\", fallbackId);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isNewBatchDialogOpen) generateBatchId();\r\n    }, [isNewBatchDialogOpen]);\r\n\r\n    // --- Handlers ---\r\n    async function onStartBatch(values: z.infer<typeof rawMaterialSchema>) {\r\n        const newBatch: PendingBatch = {\r\n            id: values.batchId || `B-${Date.now()}`,\r\n            date: values.date,\r\n            operator: values.operator,\r\n            materialName: values.materialName,\r\n            quantity: values.quantity,\r\n            status: 'PENDING'\r\n        };\r\n        setPendingBatches(prev => [...prev, newBatch]);\r\n\r\n        toast.success(\"Batch Started\", {\r\n            description: `Batch ${newBatch.id} initialized.`,\r\n            icon: <Layers className=\"h-4 w-4 text-blue-600\" />,\r\n        });\r\n\r\n        rmForm.reset({\r\n            date: new Date().toISOString().split(\"T\")[0],\r\n            operator: \"\",\r\n            batchId: \"\",\r\n            materialName: \"\",\r\n            quantity: 0,\r\n        });\r\n        setIsNewBatchDialogOpen(false);\r\n    }\r\n\r\n    const openCompletionDialog = (batch: PendingBatch) => {\r\n        setSelectedBatch(batch);\r\n        prodForm.setValue(\"productName\", \"\");\r\n        prodForm.setValue(\"unitsProduced\", 0);\r\n        setIsCompletionDialogOpen(true);\r\n    };\r\n\r\n    async function onCompleteBatch(values: z.infer<typeof productionSchema>) {\r\n        if (!selectedBatch) return;\r\n\r\n        const selectedProductInfo = products.find(p => p.name === values.productName);\r\n        const isSemiFinished = selectedProductInfo?.type === 'SEMI_FINISHED';\r\n        const isFinished = !selectedProductInfo?.type || selectedProductInfo?.type === 'FINISHED';\r\n\r\n        const productionLog = {\r\n            batchId: selectedBatch.id,\r\n            date: selectedBatch.date,\r\n            operator: selectedBatch.operator,\r\n            rmUsed: selectedBatch.materialName,\r\n            rmQuantity: selectedBatch.quantity,\r\n            componentProduced: values.productName,\r\n            quantityProduced: values.unitsProduced,\r\n            semiFinished: isSemiFinished,\r\n            finished: isFinished,\r\n            status: 'COMPLETED'\r\n        };\r\n\r\n        try {\r\n            const response = await fetch('/api/production', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(productionLog)\r\n            });\r\n\r\n            if (!response.ok) throw new Error('Failed to save batch');\r\n\r\n            setPendingBatches(prev => prev.filter(b => b.id !== selectedBatch.id));\r\n            toast.success(\"Batch Completed\", {\r\n                description: `Production recorded for Batch ${selectedBatch.id}.`,\r\n                icon: <CheckCircle2 className=\"h-4 w-4 text-emerald-600\" />,\r\n            });\r\n            setIsCompletionDialogOpen(false);\r\n            prodForm.reset();\r\n            setSelectedBatch(null);\r\n            fetchData();\r\n        } catch (error) {\r\n            toast.error(\"Failed to save batch\");\r\n        }\r\n    }\r\n\r\n    // --- Summary Calculations ---\r\n    const todayStr = new Date().toISOString().split('T')[0];\r\n    const todaysLogs = productionLogs.filter(l => l.date === todayStr);\r\n    const totalWeekly = productionLogs.length; // Placeholder logic\r\n\r\n    return (\r\n        <div className=\"space-y-6 pt-2 animate-in fade-in duration-300\">\r\n            {/* Page Header with Action Button */}\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold tracking-tight text-foreground\">Production Log</h1>\r\n                    <p className=\"text-muted-foreground\">Manage and track production batches.</p>\r\n                </div>\r\n                <Dialog open={isNewBatchDialogOpen} onOpenChange={setIsNewBatchDialogOpen}>\r\n                    <DialogTrigger asChild>\r\n                        <Button className=\"bg-primary hover:bg-primary/90 text-primary-foreground shadow-lg shadow-primary/20\">\r\n                            <Plus className=\"h-4 w-4 mr-2\" /> Log Production\r\n                        </Button>\r\n                    </DialogTrigger>\r\n                    <DialogContent className=\"max-w-2xl\">\r\n                        <DialogHeader>\r\n                            <DialogTitle>Start New Production Batch</DialogTitle>\r\n                        </DialogHeader>\r\n                        <Form {...rmForm}>\r\n                            <form onSubmit={rmForm.handleSubmit(onStartBatch)} className=\"space-y-6 pt-4\">\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                    <FormField\r\n                                        control={rmForm.control}\r\n                                        name=\"batchId\"\r\n                                        render={({ field }) => (\r\n                                            <FormItem>\r\n                                                <FormLabel>Batch ID</FormLabel>\r\n                                                <FormControl><Input {...field} readOnly disabled className=\"bg-muted font-mono\" /></FormControl>\r\n                                            </FormItem>\r\n                                        )}\r\n                                    />\r\n                                    <FormField\r\n                                        control={rmForm.control}\r\n                                        name=\"date\"\r\n                                        render={({ field }) => (\r\n                                            <FormItem>\r\n                                                <FormLabel>Date</FormLabel>\r\n                                                <FormControl><Input type=\"date\" {...field} /></FormControl>\r\n                                            </FormItem>\r\n                                        )}\r\n                                    />\r\n                                    <FormField\r\n                                        control={rmForm.control}\r\n                                        name=\"operator\"\r\n                                        render={({ field }) => (\r\n                                            <FormItem>\r\n                                                <FormLabel>Operator</FormLabel>\r\n                                                <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                                    <FormControl><SelectTrigger><SelectValue placeholder=\"Select operator\" /></SelectTrigger></FormControl>\r\n                                                    <SelectContent>\r\n                                                        {operators.map((op) => (\r\n                                                            <SelectItem key={op.id} value={op.name}>{op.name}</SelectItem>\r\n                                                        ))}\r\n                                                    </SelectContent>\r\n                                                </Select>\r\n                                            </FormItem>\r\n                                        )}\r\n                                    />\r\n                                    <FormField\r\n                                        control={rmForm.control}\r\n                                        name=\"materialName\"\r\n                                        render={({ field }) => (\r\n                                            <FormItem>\r\n                                                <FormLabel>Raw Material</FormLabel>\r\n                                                <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                                    <FormControl><SelectTrigger><SelectValue placeholder=\"Select raw material\" /></SelectTrigger></FormControl>\r\n                                                    <SelectContent className=\"max-h-[200px]\">\r\n                                                        {materials.map((item) => (\r\n                                                            <SelectItem key={item.id} value={item.name}>{item.name}</SelectItem>\r\n                                                        ))}\r\n                                                    </SelectContent>\r\n                                                </Select>\r\n                                            </FormItem>\r\n                                        )}\r\n                                    />\r\n                                    <FormField\r\n                                        control={rmForm.control}\r\n                                        name=\"quantity\"\r\n                                        render={({ field }) => (\r\n                                            <FormItem>\r\n                                                <FormLabel>Quantity Used (kg)</FormLabel>\r\n                                                <FormControl><Input type=\"number\" step=\"0.01\" {...field} /></FormControl>\r\n                                            </FormItem>\r\n                                        )}\r\n                                    />\r\n                                </div>\r\n                                <Button type=\"submit\" className=\"w-full\">Initialize Batch</Button>\r\n                            </form>\r\n                        </Form>\r\n                    </DialogContent>\r\n                </Dialog>\r\n            </div>\r\n\r\n            {/* Summary Cards */}\r\n            <div className=\"grid gap-4 md:grid-cols-3\">\r\n                <Card className=\"bg-card border-border/60 shadow-sm\">\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium\">Today's Production</CardTitle>\r\n                        <Clock className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"text-2xl font-bold\">{todaysLogs.length} Batches</div>\r\n                        <p className=\"text-xs text-muted-foreground\">+2 from yesterday</p>\r\n                    </CardContent>\r\n                </Card>\r\n                <Card className=\"bg-card border-border/60 shadow-sm\">\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium\">Total Logs</CardTitle>\r\n                        <FileText className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"text-2xl font-bold\">{productionLogs.length}</div>\r\n                        <p className=\"text-xs text-muted-foreground\">All time records</p>\r\n                    </CardContent>\r\n                </Card>\r\n                <Card className=\"bg-card border-border/60 shadow-sm\">\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium\">Weekly Output</CardTitle>\r\n                        <Calendar className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"text-2xl font-bold\">{totalWeekly}</div>\r\n                        <p className=\"text-xs text-muted-foreground\">Batches this week</p>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Main Content Area */}\r\n            <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                    <TabsList className=\"grid w-[400px] grid-cols-2\">\r\n                        <TabsTrigger value=\"pending\" className=\"relative\">\r\n                            Pending Batches\r\n                            {pendingBatches.length > 0 && (\r\n                                <span className=\"ml-2 flex h-5 w-5 items-center justify-center rounded-full bg-orange-100 text-[10px] font-bold text-orange-600\">\r\n                                    {pendingBatches.length}\r\n                                </span>\r\n                            )}\r\n                        </TabsTrigger>\r\n                        <TabsTrigger value=\"history\">History Log</TabsTrigger>\r\n                    </TabsList>\r\n                    {/* Add Filter Button or Date Picker here if needed */}\r\n                </div>\r\n\r\n                <TabsContent value=\"pending\" className=\"space-y-4\">\r\n                    <Card className=\"border-orange-200 bg-orange-50/30\">\r\n                        <CardHeader>\r\n                            <CardTitle className=\"text-orange-700 flex items-center gap-2\">\r\n                                <Clock className=\"h-5 w-5\" /> In Progress\r\n                            </CardTitle>\r\n                            <CardDescription>Batches currently on the floor. Click 'Complete' to finalize.</CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent className=\"p-0\">\r\n                            <Table>\r\n                                <TableHeader>\r\n                                    <TableRow className=\"border-orange-200\">\r\n                                        <TableHead className=\"text-orange-700\">Batch ID</TableHead>\r\n                                        <TableHead className=\"text-orange-700\">Operator</TableHead>\r\n                                        <TableHead className=\"text-orange-700\">Material</TableHead>\r\n                                        <TableHead className=\"text-orange-700\">Start Time</TableHead>\r\n                                        <TableHead className=\"text-right text-orange-700\">Action</TableHead>\r\n                                    </TableRow>\r\n                                </TableHeader>\r\n                                <TableBody>\r\n                                    {pendingBatches.length === 0 && (\r\n                                        <TableRow>\r\n                                            <TableCell colSpan={5} className=\"text-center py-8 text-muted-foreground\">\r\n                                                No pending batches. Start a new one above.\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    )}\r\n                                    {pendingBatches.map((batch) => (\r\n                                        <TableRow key={batch.id} className=\"border-orange-100 hover:bg-orange-50\">\r\n                                            <TableCell className=\"font-mono font-medium\">{batch.id}</TableCell>\r\n                                            <TableCell>{batch.operator}</TableCell>\r\n                                            <TableCell>\r\n                                                <div className=\"flex flex-col\">\r\n                                                    <span className=\"font-medium\">{batch.materialName}</span>\r\n                                                    <span className=\"text-xs text-muted-foreground\">{batch.quantity} kg</span>\r\n                                                </div>\r\n                                            </TableCell>\r\n                                            <TableCell>{batch.date}</TableCell>\r\n                                            <TableCell className=\"text-right\">\r\n                                                <Button size=\"sm\" onClick={() => openCompletionDialog(batch)} className=\"bg-emerald-600 hover:bg-emerald-700 text-white\">\r\n                                                    <Check className=\"h-4 w-4 mr-1\" /> Complete\r\n                                                </Button>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </CardContent>\r\n                    </Card>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"history\">\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>Production History</CardTitle>\r\n                            <CardDescription>Comprehensive log of all completed batches.</CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent className=\"p-0\">\r\n                            <Table>\r\n                                <TableHeader>\r\n                                    <TableRow className=\"bg-muted/30\">\r\n                                        <TableHead>Date</TableHead>\r\n                                        <TableHead>Batch ID</TableHead>\r\n                                        <TableHead>Product</TableHead>\r\n                                        <TableHead>Operator</TableHead>\r\n                                        <TableHead className=\"text-right\">Quantity</TableHead>\r\n                                        <TableHead className=\"text-center\">Status</TableHead>\r\n                                    </TableRow>\r\n                                </TableHeader>\r\n                                <TableBody>\r\n                                    {productionLogs.map((log) => (\r\n                                        <TableRow key={log.id || log.batchId} className=\"hover:bg-muted/50\">\r\n                                            <TableCell className=\"text-muted-foreground\">{log.date}</TableCell>\r\n                                            <TableCell className=\"font-mono text-xs\">{log.batchId}</TableCell>\r\n                                            <TableCell className=\"font-medium text-foreground\">{log.componentProduced}</TableCell>\r\n                                            <TableCell>{log.operator}</TableCell>\r\n                                            <TableCell className=\"text-right font-bold\">{log.quantityProduced}</TableCell>\r\n                                            <TableCell className=\"text-center\">\r\n                                                <Badge variant=\"outline\" className=\"bg-emerald-50 text-emerald-700 border-emerald-200\">Completed</Badge>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                    {productionLogs.length === 0 && (\r\n                                        <TableRow>\r\n                                            <TableCell colSpan={6} className=\"text-center py-10 text-muted-foreground\">\r\n                                                No history records found.\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    )}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </CardContent>\r\n                    </Card>\r\n                </TabsContent>\r\n            </Tabs>\r\n\r\n            {/* Completion Dialog */}\r\n            <Dialog open={isCompletionDialogOpen} onOpenChange={setIsCompletionDialogOpen}>\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle>Complete Batch: {selectedBatch?.id}</DialogTitle>\r\n                    </DialogHeader>\r\n                    <Form {...prodForm}>\r\n                        <form onSubmit={prodForm.handleSubmit(onCompleteBatch)} className=\"space-y-4\">\r\n                            <FormField\r\n                                control={prodForm.control}\r\n                                name=\"unitsProduced\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Units Produced</FormLabel>\r\n                                        <FormControl><Input type=\"number\" {...field} /></FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                            <FormField\r\n                                control={prodForm.control}\r\n                                name=\"productName\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Product</FormLabel>\r\n                                        <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                            <FormControl>\r\n                                                <SelectTrigger>\r\n                                                    <SelectValue placeholder=\"Select finished product\" />\r\n                                                </SelectTrigger>\r\n                                            </FormControl>\r\n                                            <SelectContent className=\"max-h-[200px]\">\r\n                                                {products.map((p) => (\r\n                                                    <SelectItem key={p.id} value={p.name}>\r\n                                                        {p.name}\r\n                                                    </SelectItem>\r\n                                                ))}\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                            <Button type=\"submit\" className=\"w-full bg-emerald-600 hover:bg-emerald-700\">Finalize Batch</Button>\r\n                        </form>\r\n                    </Form>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\inventory\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\layout.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":41,"column":21,"nodeType":"JSXOpeningElement","endLine":41,"endColumn":109}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Metadata } from \"next\";\nimport { Geist, Geist_Mono } from \"next/font/google\";\nimport \"./globals.css\";\nimport { Toaster } from \"@/components/ui/sonner\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\"\nimport { AppSidebar } from \"@/components/app-sidebar\"\nimport { MasterDataProvider } from \"@/lib/master-data-context\";\nimport { AuthProvider } from \"@/lib/auth-context\";\n\nconst geistSans = Geist({\n  variable: \"--font-geist-sans\",\n  subsets: [\"latin\"],\n});\n\nconst geistMono = Geist_Mono({\n  variable: \"--font-geist-mono\",\n  subsets: [\"latin\"],\n});\n\nexport const metadata: Metadata = {\n  title: \"Production Monitor\",\n  description: \"Monitor and track production efficiency\",\n};\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <html lang=\"en\">\n      <body\n        className={`${geistSans.variable} ${geistMono.variable} antialiased bg-background text-foreground`}\n      >\n        <MasterDataProvider>\n          <AuthProvider>\n            <SidebarProvider>\n              <main className=\"w-full bg-background min-h-screen transition-colors duration-300 ease-in-out\">\n                <div className=\"p-4 h-16 flex items-center justify-between border-b border-border bg-white dark:bg-zinc-950 sticky top-0 z-40 shadow-sm relative\">\n                  <div className=\"flex items-center gap-3\">\n                    <img src=\"/logo.jpg\" alt=\"KCF Logo\" className=\"h-10 w-auto object-contain rounded-sm\" />\n                    <div className=\"p-2\">\n                      <span className=\"font-bold text-lg tracking-tight text-foreground\">KOVAI INVENTORY</span>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center\">\n                    <SidebarTrigger />\n                  </div>\n                </div>\n                <div className=\"p-4 md:p-6 max-w-7xl mx-auto\">\n                  {children}\n                </div>\n              </main>\n              <AppSidebar side=\"right\" />\n              <Toaster />\n            </SidebarProvider>\n          </AuthProvider>\n        </MasterDataProvider>\n      </body>\n    </html >\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\login\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Layers' is defined but never used.","line":8,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":37,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Layers"},"fix":{"range":[240,248],"text":""},"desc":"Remove unused variable \"Layers\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":64,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":23},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":79,"column":25,"nodeType":"JSXOpeningElement","endLine":79,"endColumn":102}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport * as z from \"zod\";\r\nimport { toast } from \"sonner\";\r\nimport { Loader2, Lock, User, Layers } from \"lucide-react\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardFooter,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n} from \"@/components/ui/form\";\r\nimport { useAuth } from \"@/lib/auth-context\";\r\nimport {\r\n    Tabs,\r\n    TabsContent,\r\n    TabsList,\r\n    TabsTrigger,\r\n} from \"@/components/ui/tabs\";\r\n\r\nconst loginSchema = z.object({\r\n    username: z.string().min(1, \"Username is required\"),\r\n    password: z.string().min(1, \"Password is required\"),\r\n});\r\n\r\nexport default function LoginPage() {\r\n    const { login } = useAuth();\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const form = useForm<z.infer<typeof loginSchema>>({\r\n        resolver: zodResolver(loginSchema),\r\n        defaultValues: {\r\n            username: \"\",\r\n            password: \"\",\r\n        },\r\n    });\r\n\r\n    async function onSubmit(values: z.infer<typeof loginSchema>) {\r\n        setIsLoading(true);\r\n        try {\r\n            const success = await login(values.username, values.password);\r\n            if (success) {\r\n                toast.success(`Welcome back!`);\r\n            } else {\r\n                toast.error(\"Invalid credentials\", {\r\n                    description: \"Please check your username and password.\"\r\n                });\r\n            }\r\n        } catch (error) {\r\n            toast.error(\"An error occurred during login\");\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen w-full items-center justify-center bg-background p-4 relative overflow-hidden\">\r\n            {/* Background Decoration */}\r\n            <div className=\"absolute inset-0 bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] dark:bg-[radial-gradient(#1f2937_1px,transparent_1px)] [background-size:16px_16px] opacity-100 z-0\"></div>\r\n\r\n            <Card className=\"w-full max-w-md shadow-2xl z-10 border-primary/20 bg-card\">\r\n                <CardHeader className=\"space-y-1 text-center pb-8 pt-8\">\r\n                    <div className=\"flex justify-center mb-4\">\r\n                        <img src=\"/logo.jpg\" alt=\"KCF Logo\" className=\"h-16 w-auto object-contain\" />\r\n                    </div>\r\n                    <CardTitle className=\"text-2xl font-bold tracking-tight text-foreground\">KOVAI INVENTORY</CardTitle>\r\n                    <CardDescription className=\"text-muted-foreground\">\r\n                        Production Management System\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"px-8\">\r\n                    <Tabs defaultValue=\"operator\" className=\"w-full\">\r\n                        <TabsList className=\"grid w-full grid-cols-2 mb-8\">\r\n                            <TabsTrigger value=\"operator\">Operator login</TabsTrigger>\r\n                            <TabsTrigger value=\"admin\">Admin login</TabsTrigger>\r\n                        </TabsList>\r\n\r\n                        <TabsContent value=\"operator\">\r\n                            <Form {...form}>\r\n                                <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\r\n                                    <FormField\r\n                                        control={form.control}\r\n                                        name=\"username\"\r\n                                        render={({ field }) => (\r\n                                            <FormItem>\r\n                                                <FormLabel className=\"text-foreground font-medium\">Operator ID</FormLabel>\r\n                                                <FormControl>\r\n                                                    <div className=\"relative group\">\r\n                                                        <User className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors\" />\r\n                                                        <Input\r\n                                                            placeholder=\"Enter ID\"\r\n                                                            className=\"pl-10 h-11 bg-muted/50 border-border focus-visible:ring-primary transition-all\"\r\n                                                            {...field}\r\n                                                        />\r\n                                                    </div>\r\n                                                </FormControl>\r\n                                                <FormMessage />\r\n                                            </FormItem>\r\n                                        )}\r\n                                    />\r\n                                    <FormField\r\n                                        control={form.control}\r\n                                        name=\"password\"\r\n                                        render={({ field }) => (\r\n                                            <FormItem>\r\n                                                <FormLabel className=\"text-foreground font-medium\">Access Code</FormLabel>\r\n                                                <FormControl>\r\n                                                    <div className=\"relative group\">\r\n                                                        <Lock className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors\" />\r\n                                                        <Input\r\n                                                            type=\"password\"\r\n                                                            placeholder=\"••••••••\"\r\n                                                            className=\"pl-10 h-11 bg-muted/50 border-border focus-visible:ring-primary transition-all\"\r\n                                                            {...field}\r\n                                                        />\r\n                                                    </div>\r\n                                                </FormControl>\r\n                                                <FormMessage />\r\n                                            </FormItem>\r\n                                        )}\r\n                                    />\r\n                                    <Button\r\n                                        className=\"w-full bg-primary hover:bg-primary/90 text-primary-foreground font-semibold h-12 shadow-lg shadow-primary/20 transition-all mt-4 hover:scale-[1.02]\"\r\n                                        type=\"submit\"\r\n                                        disabled={isLoading}\r\n                                    >\r\n                                        {isLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                                        {isLoading ? \"Authenticating...\" : \"Access Dashboard\"}\r\n                                    </Button>\r\n                                </form>\r\n                            </Form>\r\n                        </TabsContent>\r\n\r\n                        <TabsContent value=\"admin\">\r\n                            <Form {...form}>\r\n                                <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\r\n                                    <FormField\r\n                                        control={form.control}\r\n                                        name=\"username\"\r\n                                        render={({ field }) => (\r\n                                            <FormItem>\r\n                                                <FormLabel className=\"text-foreground font-medium\">Username</FormLabel>\r\n                                                <FormControl>\r\n                                                    <div className=\"relative group\">\r\n                                                        <User className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors\" />\r\n                                                        <Input\r\n                                                            placeholder=\"Enter admin username\"\r\n                                                            className=\"pl-10 h-11 bg-muted/50 border-border focus-visible:ring-primary transition-all\"\r\n                                                            {...field}\r\n                                                        />\r\n                                                    </div>\r\n                                                </FormControl>\r\n                                                <FormMessage />\r\n                                            </FormItem>\r\n                                        )}\r\n                                    />\r\n                                    <FormField\r\n                                        control={form.control}\r\n                                        name=\"password\"\r\n                                        render={({ field }) => (\r\n                                            <FormItem>\r\n                                                <FormLabel className=\"text-foreground font-medium\">Password</FormLabel>\r\n                                                <FormControl>\r\n                                                    <div className=\"relative group\">\r\n                                                        <Lock className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors\" />\r\n                                                        <Input\r\n                                                            type=\"password\"\r\n                                                            placeholder=\"••••••••\"\r\n                                                            className=\"pl-10 h-11 bg-muted/50 border-border focus-visible:ring-primary transition-all\"\r\n                                                            {...field}\r\n                                                        />\r\n                                                    </div>\r\n                                                </FormControl>\r\n                                                <FormMessage />\r\n                                            </FormItem>\r\n                                        )}\r\n                                    />\r\n                                    <Button\r\n                                        className=\"w-full bg-slate-800 hover:bg-slate-900 text-white font-semibold h-12 shadow-lg shadow-slate-200 transition-all mt-4 hover:scale-[1.02]\"\r\n                                        type=\"submit\"\r\n                                        disabled={isLoading}\r\n                                    >\r\n                                        {isLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                                        {isLoading ? \"Logging in...\" : \"Admin Access\"}\r\n                                    </Button>\r\n                                </form>\r\n                            </Form>\r\n                        </TabsContent>\r\n                    </Tabs>\r\n                </CardContent>\r\n                <CardFooter className=\"flex justify-center border-t border-border py-6 bg-muted/20\">\r\n                    <p className=\"text-xs text-muted-foreground text-center font-medium uppercase tracking-wide\">\r\n                        Restricted Access • Authorized Personnel Only\r\n                    </p>\r\n                </CardFooter>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\settings\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Save' is defined but never used.","line":11,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":27,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Save"},"fix":{"range":[583,589],"text":""},"desc":"Remove unused variable \"Save\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deleteMaterial' is assigned a value but never used.","line":24,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deleteProduct' is assigned a value but never used.","line":25,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deleteOperator' is assigned a value but never used.","line":26,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":309,"column":102,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":309,"endColumn":105,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18759,18762],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18759,18762],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":385,"column":102,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":385,"endColumn":105,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24727,24730],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24727,24730],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":535,"column":99,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":535,"endColumn":102,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[36309,36312],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[36309,36312],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, Suspense } from \"react\";\r\nimport { useSearchParams, useRouter } from \"next/navigation\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Plus, Edit2, Save, Trash2 } from \"lucide-react\";\r\nimport { useMasterData, Material, Product, Operator } from \"@/lib/master-data-context\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { useAuth } from \"@/lib/auth-context\";\r\n\r\nfunction SettingsContent() {\r\n    const searchParams = useSearchParams();\r\n    const router = useRouter();\r\n    const { user, users, addUser, deleteUser: removeUser } = useAuth();\r\n    const currentTab = searchParams.get(\"tab\") || \"materials\";\r\n    const {\r\n        materials, addMaterial, deleteMaterial, updateMaterial,\r\n        products, addProduct, deleteProduct, updateProduct,\r\n        operators, addOperator, deleteOperator, updateOperator\r\n    } = useMasterData();\r\n\r\n    // -- Dialog States --\r\n    const [isMaterialOpen, setIsMaterialOpen] = useState(false);\r\n    const [isProductOpen, setIsProductOpen] = useState(false);\r\n    const [isOperatorOpen, setIsOperatorOpen] = useState(false);\r\n    const [isUserOpen, setIsUserOpen] = useState(false);\r\n\r\n    // -- Form States --\r\n    const [newMaterial, setNewMaterial] = useState({ name: \"\", unit: \"kg\", cost: \"\" });\r\n    const [editingMaterial, setEditingMaterial] = useState<Material | null>(null);\r\n    const [isEditMaterialOpen, setIsEditMaterialOpen] = useState(false);\r\n\r\n    const [newProduct, setNewProduct] = useState({ name: \"\", type: \"FINISHED\" as const, sku: \"\", minStockLevel: 50 });\r\n    const [editingProduct, setEditingProduct] = useState<Product | null>(null);\r\n    const [isEditProductOpen, setIsEditProductOpen] = useState(false);\r\n\r\n    const [newOperator, setNewOperator] = useState({ name: \"\", role: \"Operator\" });\r\n    const [editingOperator, setEditingOperator] = useState<Operator | null>(null);\r\n    const [isEditOperatorOpen, setIsEditOperatorOpen] = useState(false);\r\n\r\n    const [newUser, setNewUser] = useState({ username: \"\", password: \"\", name: \"\", role: \"OPERATOR\" as const });\r\n\r\n    // -- Handlers --\r\n    const handleAddMaterial = () => {\r\n        if (!newMaterial.name) return;\r\n        addMaterial({\r\n            name: newMaterial.name,\r\n            unit: newMaterial.unit,\r\n            costPerUnit: parseFloat(newMaterial.cost) || 0\r\n        });\r\n        setNewMaterial({ name: \"\", unit: \"kg\", cost: \"\" });\r\n        setIsMaterialOpen(false);\r\n    };\r\n\r\n    const handleUpdateMaterial = () => {\r\n        if (!editingMaterial || !editingMaterial.name) return;\r\n        updateMaterial(editingMaterial.id, {\r\n            name: editingMaterial.name,\r\n            unit: editingMaterial.unit,\r\n            costPerUnit: editingMaterial.costPerUnit\r\n        });\r\n        setEditingMaterial(null);\r\n        setIsEditMaterialOpen(false);\r\n    };\r\n\r\n    const openEditMaterialDialog = (m: Material) => {\r\n        setEditingMaterial({ ...m });\r\n        setIsEditMaterialOpen(true);\r\n    };\r\n\r\n    const handleAddProduct = () => {\r\n        if (!newProduct.name) return;\r\n        addProduct({\r\n            name: newProduct.name,\r\n            type: newProduct.type,\r\n            sku: newProduct.sku,\r\n            minStockLevel: newProduct.minStockLevel\r\n        });\r\n        setNewProduct({ name: \"\", type: \"FINISHED\", sku: \"\", minStockLevel: 50 });\r\n        setIsProductOpen(false);\r\n    };\r\n\r\n    const handleUpdateProduct = () => {\r\n        if (!editingProduct || !editingProduct.name) return;\r\n        updateProduct(editingProduct.id, {\r\n            name: editingProduct.name,\r\n            type: editingProduct.type,\r\n            sku: editingProduct.sku,\r\n            minStockLevel: editingProduct.minStockLevel\r\n        });\r\n        setEditingProduct(null);\r\n        setIsEditProductOpen(false);\r\n    };\r\n\r\n    const openEditProductDialog = (product: Product) => {\r\n        setEditingProduct({ ...product });\r\n        setIsEditProductOpen(true);\r\n    };\r\n\r\n    const handleAddOperator = () => {\r\n        if (!newOperator.name) return;\r\n        addOperator({\r\n            name: newOperator.name,\r\n            role: newOperator.role\r\n        });\r\n        setNewOperator({ name: \"\", role: \"Operator\" });\r\n        setIsOperatorOpen(false);\r\n    };\r\n\r\n    const handleUpdateOperator = () => {\r\n        if (!editingOperator || !editingOperator.name) return;\r\n        updateOperator(editingOperator.id, {\r\n            name: editingOperator.name,\r\n            role: editingOperator.role\r\n        });\r\n        setEditingOperator(null);\r\n        setIsEditOperatorOpen(false);\r\n    };\r\n\r\n    const openEditOperatorDialog = (op: Operator) => {\r\n        setEditingOperator({ ...op });\r\n        setIsEditOperatorOpen(true);\r\n    };\r\n\r\n    const handleAddUser = async () => {\r\n        if (!newUser.username || !newUser.password) return;\r\n        await addUser({\r\n            username: newUser.username,\r\n            password: newUser.password,\r\n            name: newUser.name || newUser.username,\r\n            role: newUser.role\r\n        });\r\n        setNewUser({ username: \"\", password: \"\", name: \"\", role: \"OPERATOR\" });\r\n        setIsUserOpen(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-8 max-w-6xl mx-auto space-y-8\">\r\n            <div className=\"flex flex-col gap-2\">\r\n                <h1 className=\"text-3xl font-bold tracking-tight text-foreground\">Master Data Settings</h1>\r\n                <p className=\"text-muted-foreground\">Manage your Raw Materials, Products, Operator profiles, and System Users.</p>\r\n            </div>\r\n\r\n            <Tabs value={currentTab} onValueChange={(val) => router.push(`/settings?tab=${val}`)} className=\"w-full\">\r\n                <TabsList className={`grid w-full max-w-[500px] ${user?.role === 'ADMIN' ? 'grid-cols-4' : 'grid-cols-3'}`}>\r\n                    <TabsTrigger value=\"materials\">Materials</TabsTrigger>\r\n                    <TabsTrigger value=\"products\">Products</TabsTrigger>\r\n                    <TabsTrigger value=\"operators\">Operators</TabsTrigger>\r\n                    {user?.role === 'ADMIN' && <TabsTrigger value=\"users\">Users</TabsTrigger>}\r\n                </TabsList>\r\n\r\n                {/* --- MATERIALS TAB --- */}\r\n                <TabsContent value=\"materials\" className=\"space-y-4\">\r\n                    <Card>\r\n                        <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                            <div className=\"space-y-1\">\r\n                                <CardTitle>Raw Materials</CardTitle>\r\n                                <CardDescription>Define the inputs for your production.</CardDescription>\r\n                            </div>\r\n                            {user?.role === 'ADMIN' && (\r\n                                <Dialog open={isMaterialOpen} onOpenChange={setIsMaterialOpen}>\r\n                                    <DialogTrigger asChild>\r\n                                        <Button className=\"bg-primary text-primary-foreground hover:bg-primary/90\"><Plus className=\"mr-2 h-4 w-4\" /> Add Material</Button>\r\n                                    </DialogTrigger>\r\n                                    <DialogContent>\r\n                                        <DialogHeader>\r\n                                            <DialogTitle>Add Raw Material</DialogTitle>\r\n                                            <DialogDescription>Add a new material to your inventory definition.</DialogDescription>\r\n                                        </DialogHeader>\r\n                                        <div className=\"grid gap-4 py-4\">\r\n                                            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                                <Label htmlFor=\"name\" className=\"text-right\">Name</Label>\r\n                                                <Input id=\"name\" value={newMaterial.name} onChange={(e) => setNewMaterial({ ...newMaterial, name: e.target.value })} className=\"col-span-3\" />\r\n                                            </div>\r\n                                            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                                <Label htmlFor=\"unit\" className=\"text-right\">Unit</Label>\r\n                                                <Select value={newMaterial.unit} onValueChange={(val) => setNewMaterial({ ...newMaterial, unit: val })}>\r\n                                                    <SelectTrigger className=\"col-span-3\">\r\n                                                        <SelectValue placeholder=\"Select unit\" />\r\n                                                    </SelectTrigger>\r\n                                                    <SelectContent>\r\n                                                        <SelectItem value=\"kg\">kg</SelectItem>\r\n                                                        <SelectItem value=\"l\">liters</SelectItem>\r\n                                                        <SelectItem value=\"m\">meters</SelectItem>\r\n                                                        <SelectItem value=\"pcs\">pieces</SelectItem>\r\n                                                    </SelectContent>\r\n                                                </Select>\r\n                                            </div>\r\n                                            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                                <Label htmlFor=\"cost\" className=\"text-right\">Cost</Label>\r\n                                                <Input id=\"cost\" type=\"number\" value={newMaterial.cost} onChange={(e) => setNewMaterial({ ...newMaterial, cost: e.target.value })} className=\"col-span-3\" placeholder=\"0.00\" />\r\n                                            </div>\r\n                                        </div>\r\n                                        <DialogFooter>\r\n                                            <Button onClick={handleAddMaterial}>Save changes</Button>\r\n                                        </DialogFooter>\r\n                                    </DialogContent>\r\n                                </Dialog>\r\n                            )}\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <Table>\r\n                                <TableHeader>\r\n                                    <TableRow>\r\n                                        <TableHead>ID</TableHead>\r\n                                        <TableHead>Name</TableHead>\r\n                                        <TableHead>Unit</TableHead>\r\n                                        {user?.role === 'ADMIN' && <TableHead className=\"text-right\">Actions</TableHead>}\r\n                                    </TableRow>\r\n                                </TableHeader>\r\n                                <TableBody>\r\n                                    {materials.length === 0 ? (\r\n                                        <TableRow><TableCell colSpan={user?.role === 'ADMIN' ? 4 : 3} className=\"text-center text-muted-foreground\">No materials defined.</TableCell></TableRow>\r\n                                    ) : materials.map((m) => (\r\n                                        <TableRow key={m.id}>\r\n                                            <TableCell className=\"font-mono text-xs\">{m.id}</TableCell>\r\n                                            <TableCell className=\"font-medium\">{m.name}</TableCell>\r\n                                            <TableCell>{m.unit}</TableCell>\r\n                                            {user?.role === 'ADMIN' && (\r\n                                                <TableCell className=\"text-right\">\r\n                                                    <Button variant=\"ghost\" size=\"icon\" onClick={() => openEditMaterialDialog(m)}>\r\n                                                        <Edit2 className=\"h-4 w-4 text-muted-foreground\" />\r\n                                                    </Button>\r\n                                                </TableCell>\r\n                                            )}\r\n                                        </TableRow>\r\n                                    ))}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </CardContent>\r\n\r\n                        {/* Edit Material Dialog */}\r\n                        <Dialog open={isEditMaterialOpen} onOpenChange={setIsEditMaterialOpen}>\r\n                            <DialogContent>\r\n                                <DialogHeader>\r\n                                    <DialogTitle>Edit Material</DialogTitle>\r\n                                    <DialogDescription>Update material details.</DialogDescription>\r\n                                </DialogHeader>\r\n                                {editingMaterial && (\r\n                                    <div className=\"grid gap-4 py-4\">\r\n                                        <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                            <Label htmlFor=\"edit-m-name\" className=\"text-right\">Name</Label>\r\n                                            <Input id=\"edit-m-name\" value={editingMaterial.name} onChange={(e) => setEditingMaterial({ ...editingMaterial, name: e.target.value })} className=\"col-span-3\" />\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                            <Label htmlFor=\"edit-m-unit\" className=\"text-right\">Unit</Label>\r\n                                            <Select value={editingMaterial.unit} onValueChange={(val) => setEditingMaterial({ ...editingMaterial, unit: val })}>\r\n                                                <SelectTrigger className=\"col-span-3\">\r\n                                                    <SelectValue placeholder=\"Select unit\" />\r\n                                                </SelectTrigger>\r\n                                                <SelectContent>\r\n                                                    <SelectItem value=\"kg\">kg</SelectItem>\r\n                                                    <SelectItem value=\"l\">liters</SelectItem>\r\n                                                    <SelectItem value=\"m\">meters</SelectItem>\r\n                                                    <SelectItem value=\"pcs\">pieces</SelectItem>\r\n                                                </SelectContent>\r\n                                            </Select>\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                            <Label htmlFor=\"edit-m-cost\" className=\"text-right\">Cost</Label>\r\n                                            <Input id=\"edit-m-cost\" type=\"number\" value={editingMaterial.costPerUnit || ''} onChange={(e) => setEditingMaterial({ ...editingMaterial, costPerUnit: parseFloat(e.target.value) || 0 })} className=\"col-span-3\" />\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                                <DialogFooter>\r\n                                    <Button onClick={handleUpdateMaterial}>Save Changes</Button>\r\n                                </DialogFooter>\r\n                            </DialogContent>\r\n                        </Dialog>\r\n                    </Card>\r\n                </TabsContent>\r\n\r\n                {/* --- PRODUCTS TAB --- */}\r\n                <TabsContent value=\"products\" className=\"space-y-4\">\r\n                    <Card>\r\n                        <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                            <div className=\"space-y-1\">\r\n                                <CardTitle>Products Management</CardTitle>\r\n                                <CardDescription>Manage Finished and Semi-Finished goods.</CardDescription>\r\n                            </div>\r\n                            {user?.role === 'ADMIN' && (\r\n                                <Dialog open={isProductOpen} onOpenChange={setIsProductOpen}>\r\n                                    <DialogTrigger asChild>\r\n                                        <Button className=\"bg-primary text-primary-foreground hover:bg-primary/90\"><Plus className=\"mr-2 h-4 w-4\" /> Add Product</Button>\r\n                                    </DialogTrigger>\r\n                                    <DialogContent>\r\n                                        <DialogHeader>\r\n                                            <DialogTitle>Add Product</DialogTitle>\r\n                                            <DialogDescription>Define a new output product.</DialogDescription>\r\n                                        </DialogHeader>\r\n                                        <div className=\"grid gap-4 py-4\">\r\n                                            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                                <Label htmlFor=\"p-name\" className=\"text-right\">Name</Label>\r\n                                                <Input id=\"p-name\" value={newProduct.name} onChange={(e) => setNewProduct({ ...newProduct, name: e.target.value })} className=\"col-span-3\" />\r\n                                            </div>\r\n                                            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                                <Label htmlFor=\"sku\" className=\"text-right\">SKU</Label>\r\n                                                <Input id=\"sku\" value={newProduct.sku} onChange={(e) => setNewProduct({ ...newProduct, sku: e.target.value })} className=\"col-span-3\" />\r\n                                            </div>\r\n                                            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                                <Label htmlFor=\"type\" className=\"text-right\">Type</Label>\r\n                                                <Select value={newProduct.type} onValueChange={(val: any) => setNewProduct({ ...newProduct, type: val })}>\r\n                                                    <SelectTrigger className=\"col-span-3\">\r\n                                                        <SelectValue placeholder=\"Select type\" />\r\n                                                    </SelectTrigger>\r\n                                                    <SelectContent>\r\n                                                        <SelectItem value=\"FINISHED\">Finished Good</SelectItem>\r\n                                                        <SelectItem value=\"SEMI_FINISHED\">Semi-Finished</SelectItem>\r\n                                                    </SelectContent>\r\n                                                </Select>\r\n                                            </div>\r\n                                            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                                <Label htmlFor=\"minStock\" className=\"text-right\">Min Stock</Label>\r\n                                                <Input id=\"minStock\" type=\"number\" value={newProduct.minStockLevel} onChange={(e) => setNewProduct({ ...newProduct, minStockLevel: parseInt(e.target.value) || 0 })} className=\"col-span-3\" />\r\n                                            </div>\r\n                                        </div>\r\n                                        <DialogFooter>\r\n                                            <Button onClick={handleAddProduct}>Save changes</Button>\r\n                                        </DialogFooter>\r\n                                    </DialogContent>\r\n                                </Dialog>\r\n                            )}\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <Table>\r\n                                <TableHeader>\r\n                                    <TableRow>\r\n                                        <TableHead>SKU</TableHead>\r\n                                        <TableHead>Name</TableHead>\r\n                                        <TableHead>Type</TableHead>\r\n                                        {user?.role === 'ADMIN' && <TableHead className=\"text-right\">Actions</TableHead>}\r\n                                    </TableRow>\r\n                                </TableHeader>\r\n                                <TableBody>\r\n                                    {products.length === 0 ? (\r\n                                        <TableRow><TableCell colSpan={user?.role === 'ADMIN' ? 4 : 3} className=\"text-center text-muted-foreground\">No products defined.</TableCell></TableRow>\r\n                                    ) : products.map((p) => (\r\n                                        <TableRow key={p.id}>\r\n                                            <TableCell className=\"font-mono text-xs\">{p.sku || \"-\"}</TableCell>\r\n                                            <TableCell className=\"font-medium\">{p.name}</TableCell>\r\n                                            <TableCell>\r\n                                                <Badge variant={p.type === 'FINISHED' ? 'default' : 'secondary'}>\r\n                                                    {p.type === 'FINISHED' ? 'Finished' : 'Semi-Finished'}\r\n                                                </Badge>\r\n                                            </TableCell>\r\n                                            {user?.role === 'ADMIN' && (\r\n                                                <TableCell className=\"text-right\">\r\n                                                    <Button variant=\"ghost\" size=\"icon\" onClick={() => openEditProductDialog(p)}>\r\n                                                        <Edit2 className=\"h-4 w-4 text-muted-foreground\" />\r\n                                                    </Button>\r\n                                                </TableCell>\r\n                                            )}\r\n                                        </TableRow>\r\n                                    ))}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </CardContent>\r\n\r\n                        {/* Edit Product Dialog */}\r\n                        <Dialog open={isEditProductOpen} onOpenChange={setIsEditProductOpen}>\r\n                            <DialogContent>\r\n                                <DialogHeader>\r\n                                    <DialogTitle>Edit Product</DialogTitle>\r\n                                    <DialogDescription>Update product details.</DialogDescription>\r\n                                </DialogHeader>\r\n                                {editingProduct && (\r\n                                    <div className=\"grid gap-4 py-4\">\r\n                                        <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                            <Label htmlFor=\"edit-p-name\" className=\"text-right\">Name</Label>\r\n                                            <Input id=\"edit-p-name\" value={editingProduct.name} onChange={(e) => setEditingProduct({ ...editingProduct, name: e.target.value })} className=\"col-span-3\" />\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                            <Label htmlFor=\"edit-sku\" className=\"text-right\">SKU</Label>\r\n                                            <Input id=\"edit-sku\" value={editingProduct.sku || ''} onChange={(e) => setEditingProduct({ ...editingProduct, sku: e.target.value })} className=\"col-span-3\" />\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                            <Label htmlFor=\"edit-type\" className=\"text-right\">Type</Label>\r\n                                            <Select value={editingProduct.type} onValueChange={(val: any) => setEditingProduct({ ...editingProduct, type: val })}>\r\n                                                <SelectTrigger className=\"col-span-3\">\r\n                                                    <SelectValue placeholder=\"Select type\" />\r\n                                                </SelectTrigger>\r\n                                                <SelectContent>\r\n                                                    <SelectItem value=\"FINISHED\">Finished Good</SelectItem>\r\n                                                    <SelectItem value=\"SEMI_FINISHED\">Semi-Finished</SelectItem>\r\n                                                </SelectContent>\r\n                                            </Select>\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                            <Label htmlFor=\"edit-minStock\" className=\"text-right\">Min Stock</Label>\r\n                                            <Input id=\"edit-minStock\" type=\"number\" value={editingProduct.minStockLevel || 50} onChange={(e) => setEditingProduct({ ...editingProduct, minStockLevel: parseInt(e.target.value) || 0 })} className=\"col-span-3\" />\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                                <DialogFooter>\r\n                                    <Button onClick={handleUpdateProduct}>Save Changes</Button>\r\n                                </DialogFooter>\r\n                            </DialogContent>\r\n                        </Dialog>\r\n                    </Card>\r\n                </TabsContent>\r\n\r\n                {/* --- OPERATORS TAB --- */}\r\n                <TabsContent value=\"operators\" className=\"space-y-4\">\r\n                    <Card>\r\n                        <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                            <div className=\"space-y-1\">\r\n                                <CardTitle>Operators</CardTitle>\r\n                                <CardDescription>Manage authorized personnel.</CardDescription>\r\n                            </div>\r\n                            {user?.role === 'ADMIN' && (\r\n                                <Dialog open={isOperatorOpen} onOpenChange={setIsOperatorOpen}>\r\n                                    <DialogTrigger asChild>\r\n                                        <Button className=\"bg-primary text-primary-foreground hover:bg-primary/90\"><Plus className=\"mr-2 h-4 w-4\" /> Add Operator</Button>\r\n                                    </DialogTrigger>\r\n                                    <DialogContent>\r\n                                        <DialogHeader>\r\n                                            <DialogTitle>Add Operator</DialogTitle>\r\n                                            <DialogDescription>Register a new machine operator.</DialogDescription>\r\n                                        </DialogHeader>\r\n                                        <div className=\"grid gap-4 py-4\">\r\n                                            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                                <Label htmlFor=\"op-name\" className=\"text-right\">Name</Label>\r\n                                                <Input id=\"op-name\" value={newOperator.name} onChange={(e) => setNewOperator({ ...newOperator, name: e.target.value })} className=\"col-span-3\" />\r\n                                            </div>\r\n                                            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                                <Label htmlFor=\"role\" className=\"text-right\">Role</Label>\r\n                                                <Input id=\"role\" value={newOperator.role} onChange={(e) => setNewOperator({ ...newOperator, role: e.target.value })} className=\"col-span-3\" />\r\n                                            </div>\r\n                                        </div>\r\n                                        <DialogFooter>\r\n                                            <Button onClick={handleAddOperator}>Save changes</Button>\r\n                                        </DialogFooter>\r\n                                    </DialogContent>\r\n                                </Dialog>\r\n                            )}\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <Table>\r\n                                <TableHeader>\r\n                                    <TableRow>\r\n                                        <TableHead>ID</TableHead>\r\n                                        <TableHead>Name</TableHead>\r\n                                        <TableHead>Role</TableHead>\r\n                                        {user?.role === 'ADMIN' && <TableHead className=\"text-right\">Actions</TableHead>}\r\n                                    </TableRow>\r\n                                </TableHeader>\r\n                                <TableBody>\r\n                                    {operators.length === 0 ? (\r\n                                        <TableRow><TableCell colSpan={user?.role === 'ADMIN' ? 4 : 3} className=\"text-center text-muted-foreground\">No operators defined.</TableCell></TableRow>\r\n                                    ) : operators.map((op) => (\r\n                                        <TableRow key={op.id}>\r\n                                            <TableCell className=\"font-mono text-xs\">{op.id}</TableCell>\r\n                                            <TableCell className=\"font-medium\">{op.name}</TableCell>\r\n                                            <TableCell>{op.role}</TableCell>\r\n                                            {user?.role === 'ADMIN' && (\r\n                                                <TableCell className=\"text-right\">\r\n                                                    <Button variant=\"ghost\" size=\"icon\" onClick={() => openEditOperatorDialog(op)}>\r\n                                                        <Edit2 className=\"h-4 w-4 text-muted-foreground\" />\r\n                                                    </Button>\r\n                                                </TableCell>\r\n                                            )}\r\n                                        </TableRow>\r\n                                    ))}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </CardContent>\r\n\r\n                        {/* Edit Operator Dialog */}\r\n                        <Dialog open={isEditOperatorOpen} onOpenChange={setIsEditOperatorOpen}>\r\n                            <DialogContent>\r\n                                <DialogHeader>\r\n                                    <DialogTitle>Edit Operator</DialogTitle>\r\n                                    <DialogDescription>Update operator details.</DialogDescription>\r\n                                </DialogHeader>\r\n                                {editingOperator && (\r\n                                    <div className=\"grid gap-4 py-4\">\r\n                                        <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                            <Label htmlFor=\"edit-op-name\" className=\"text-right\">Name</Label>\r\n                                            <Input id=\"edit-op-name\" value={editingOperator.name} onChange={(e) => setEditingOperator({ ...editingOperator, name: e.target.value })} className=\"col-span-3\" />\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                            <Label htmlFor=\"edit-role\" className=\"text-right\">Role</Label>\r\n                                            <Input id=\"edit-role\" value={editingOperator.role} onChange={(e) => setEditingOperator({ ...editingOperator, role: e.target.value })} className=\"col-span-3\" />\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                                <DialogFooter>\r\n                                    <Button onClick={handleUpdateOperator}>Save Changes</Button>\r\n                                </DialogFooter>\r\n                            </DialogContent>\r\n                        </Dialog>\r\n                    </Card>\r\n                </TabsContent>\r\n\r\n                {/* --- USERS TAB (Admin Only) --- */}\r\n                {user?.role === 'ADMIN' && (\r\n                    <TabsContent value=\"users\" className=\"space-y-4\">\r\n                        <Card>\r\n                            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                                <div className=\"space-y-1\">\r\n                                    <CardTitle>User Management</CardTitle>\r\n                                    <CardDescription>Manage system access and roles.</CardDescription>\r\n                                </div>\r\n                                <Dialog open={isUserOpen} onOpenChange={setIsUserOpen}>\r\n                                    <DialogTrigger asChild>\r\n                                        <Button className=\"bg-primary text-primary-foreground hover:bg-primary/90\"><Plus className=\"mr-2 h-4 w-4\" /> Add User</Button>\r\n                                    </DialogTrigger>\r\n                                    <DialogContent>\r\n                                        <DialogHeader>\r\n                                            <DialogTitle>Add New User</DialogTitle>\r\n                                            <DialogDescription>Create a new user account.</DialogDescription>\r\n                                        </DialogHeader>\r\n                                        <div className=\"grid gap-4 py-4\">\r\n                                            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                                <Label htmlFor=\"u-username\" className=\"text-right\">Username</Label>\r\n                                                <Input id=\"u-username\" value={newUser.username} onChange={(e) => setNewUser({ ...newUser, username: e.target.value })} className=\"col-span-3\" />\r\n                                            </div>\r\n                                            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                                <Label htmlFor=\"u-password\" className=\"text-right\">Password</Label>\r\n                                                <Input id=\"u-password\" type=\"password\" value={newUser.password} onChange={(e) => setNewUser({ ...newUser, password: e.target.value })} className=\"col-span-3\" />\r\n                                            </div>\r\n                                            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                                <Label htmlFor=\"u-name\" className=\"text-right\">Full Name</Label>\r\n                                                <Input id=\"u-name\" value={newUser.name} onChange={(e) => setNewUser({ ...newUser, name: e.target.value })} className=\"col-span-3\" />\r\n                                            </div>\r\n                                            <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                                                <Label htmlFor=\"u-role\" className=\"text-right\">Role</Label>\r\n                                                <Select value={newUser.role} onValueChange={(val: any) => setNewUser({ ...newUser, role: val })}>\r\n                                                    <SelectTrigger className=\"col-span-3\">\r\n                                                        <SelectValue placeholder=\"Select role\" />\r\n                                                    </SelectTrigger>\r\n                                                    <SelectContent>\r\n                                                        <SelectItem value=\"OPERATOR\">Operator</SelectItem>\r\n                                                        <SelectItem value=\"ADMIN\">Admin</SelectItem>\r\n                                                    </SelectContent>\r\n                                                </Select>\r\n                                            </div>\r\n                                        </div>\r\n                                        <DialogFooter>\r\n                                            <Button onClick={handleAddUser} className=\"bg-primary text-primary-foreground hover:bg-primary/90\">Create User</Button>\r\n                                        </DialogFooter>\r\n                                    </DialogContent>\r\n                                </Dialog>\r\n                            </CardHeader>\r\n                            <CardContent>\r\n                                <Table>\r\n                                    <TableHeader>\r\n                                        <TableRow>\r\n                                            <TableHead>Username</TableHead>\r\n                                            <TableHead>Name</TableHead>\r\n                                            <TableHead>Role</TableHead>\r\n                                            <TableHead className=\"text-right\">Actions</TableHead>\r\n                                        </TableRow>\r\n                                    </TableHeader>\r\n                                    <TableBody>\r\n                                        {users.map((u) => (\r\n                                            <TableRow key={u.id}>\r\n                                                <TableCell className=\"font-medium\">{u.username}</TableCell>\r\n                                                <TableCell>{u.name}</TableCell>\r\n                                                <TableCell>\r\n                                                    <Badge variant={u.role === 'ADMIN' ? 'default' : 'secondary'}>\r\n                                                        {u.role}\r\n                                                    </Badge>\r\n                                                </TableCell>\r\n                                                <TableCell className=\"text-right\">\r\n                                                    <Button\r\n                                                        variant=\"ghost\"\r\n                                                        size=\"icon\"\r\n                                                        className=\"text-muted-foreground hover:text-destructive hover:bg-destructive/10\"\r\n                                                        onClick={() => {\r\n                                                            if (confirm(`Are you sure you want to delete user ${u.username}?`)) {\r\n                                                                removeUser(u.id);\r\n                                                            }\r\n                                                        }}\r\n                                                    >\r\n                                                        <Trash2 className=\"h-4 w-4\" />\r\n                                                    </Button>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        ))}\r\n                                    </TableBody>\r\n                                </Table>\r\n                            </CardContent>\r\n                        </Card>\r\n                    </TabsContent>\r\n                )}\r\n            </Tabs>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function SettingsPage() {\r\n    return (\r\n        <Suspense fallback={<div className=\"p-8\">Loading settings...</div>}>\r\n            <SettingsContent />\r\n        </Suspense>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\app\\workflows\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":10,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":6,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"X"},"fix":{"range":[135,143],"text":""},"desc":"Remove unused variable \"X\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Globe' is defined but never used.","line":13,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":10,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Globe"},"fix":{"range":[178,190],"text":""},"desc":"Remove unused variable \"Globe\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":16,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ArrowRight"},"fix":{"range":[210,227],"text":""},"desc":"Remove unused variable \"ArrowRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used.","line":19,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":14,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Card"},"fix":{"range":[303,349],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Input' is defined but never used.","line":20,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":15,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Input"},"fix":{"range":[349,397],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setNodes' is assigned a value but never used.","line":35,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport {\r\n    Plus,\r\n    Save,\r\n    Play,\r\n    Settings,\r\n    MoreHorizontal,\r\n    X,\r\n    MessageSquare,\r\n    Database,\r\n    Globe,\r\n    Zap,\r\n    Cpu,\r\n    ArrowRight\r\n} from 'lucide-react';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\n\r\n// Design: \r\n// A canvas area with a dot grid background.\r\n// Draggable nodes (simulated with absolute positioning for this MVP).\r\n// Sidebar with components to drag in.\r\n\r\nconst NODE_TYPES = [\r\n    { type: 'trigger', label: 'Webhook Trigger', icon: Zap, color: 'text-amber-400', border: 'border-amber-400/50', bg: 'bg-amber-400/10' },\r\n    { type: 'action', label: 'LLM Process', icon: Cpu, color: 'text-primary', border: 'border-primary/50', bg: 'bg-primary/10' },\r\n    { type: 'source', label: 'Data Source', icon: Database, color: 'text-emerald-400', border: 'border-emerald-400/50', bg: 'bg-emerald-400/10' },\r\n    { type: 'output', label: 'Response', icon: MessageSquare, color: 'text-purple-400', border: 'border-purple-400/50', bg: 'bg-purple-400/10' },\r\n];\r\n\r\nexport default function WorkflowsPage() {\r\n    const [nodes, setNodes] = useState([\r\n        { id: 1, type: 'trigger', label: 'New Email Received', x: 100, y: 100 },\r\n        { id: 2, type: 'action', label: 'Analyze Sentiment', x: 400, y: 150 },\r\n        { id: 3, type: 'output', label: 'Slack Notification', x: 750, y: 120 },\r\n    ]);\r\n\r\n    return (\r\n        <div className=\"flex h-[calc(100vh-4rem)] flex-col bg-background relative overflow-hidden\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between border-b border-border bg-background px-6 py-3 z-20\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <div className=\"flex h-8 w-8 items-center justify-center rounded-lg bg-primary/20 text-primary border border-primary/50\">\r\n                        <Zap className=\"h-4 w-4\" />\r\n                    </div>\r\n                    <div>\r\n                        <h1 className=\"text-sm font-bold text-foreground\">Invoice Processing Pipeline</h1>\r\n                        <p className=\"text-[10px] text-muted-foreground uppercase tracking-wider\">v1.2 • Active</p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <Button variant=\"outline\" size=\"sm\" className=\"h-8 border-white/10 bg-white/5 hover:bg-white/10 text-muted-foreground\">\r\n                        <Settings className=\"mr-2 h-3 w-3\" /> Config\r\n                    </Button>\r\n                    <Button size=\"sm\" className=\"h-8 bg-primary hover:bg-primary/90 text-primary-foreground shadow-[0_0_15px_rgba(59,130,246,0.5)]\">\r\n                        <Save className=\"mr-2 h-3 w-3\" /> Save Workflow\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"flex flex-1 overflow-hidden relative\">\r\n                {/* Sidebar */}\r\n                <div className=\"w-64 border-r border-border bg-card p-4 z-10 flex flex-col gap-4\">\r\n                    <div>\r\n                        <h3 className=\"mb-2 text-xs font-semibold uppercase tracking-wider text-muted-foreground\">Components</h3>\r\n                        <div className=\"space-y-2\">\r\n                            {NODE_TYPES.map((node) => (\r\n                                <div key={node.type} className=\"flex cursor-move items-center gap-3 rounded-lg border border-border bg-background p-3 hover:border-primary/50 hover:bg-accent transition-colors group\">\r\n                                    <node.icon className={`h-4 w-4 ${node.color}`} />\r\n                                    <span className=\"text-sm font-medium text-foreground\">{node.label}</span>\r\n                                    <Plus className=\"ml-auto h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity text-muted-foreground\" />\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Canvas */}\r\n                <div className=\"flex-1 relative bg-muted/20\">\r\n                    {/* Grid Pattern */}\r\n                    <div className=\"absolute inset-0 opacity-20\"\r\n                        style={{\r\n                            backgroundImage: 'radial-gradient(circle at 1px 1px, #ffffff 1px, transparent 0)',\r\n                            backgroundSize: '24px 24px'\r\n                        }}\r\n                    />\r\n\r\n                    {/* Nodes (Simulated) */}\r\n                    {nodes.map((node, index) => {\r\n                        const typeDef = NODE_TYPES.find(t => t.type === node.type) || NODE_TYPES[0];\r\n                        return (\r\n                            <React.Fragment key={node.id}>\r\n                                {/* Connection Line (Mock) */}\r\n                                {index < nodes.length - 1 && (\r\n                                    <svg className=\"absolute inset-0 h-full w-full pointer-events-none overflow-visible\">\r\n                                        <path\r\n                                            d={`M ${node.x + 200} ${node.y + 40} C ${node.x + 250} ${node.y + 40}, ${nodes[index + 1].x - 50} ${nodes[index + 1].y + 40}, ${nodes[index + 1].x} ${nodes[index + 1].y + 40}`}\r\n                                            fill=\"none\"\r\n                                            stroke=\"url(#gradient-line)\"\r\n                                            strokeWidth=\"2\"\r\n                                            className=\"opacity-50\"\r\n                                        />\r\n                                        <defs>\r\n                                            <linearGradient id=\"gradient-line\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                                                <stop offset=\"0%\" stopColor=\"#3b82f6\" stopOpacity=\"0.2\" />\r\n                                                <stop offset=\"100%\" stopColor=\"#3b82f6\" stopOpacity=\"1\" />\r\n                                            </linearGradient>\r\n                                        </defs>\r\n                                    </svg>\r\n                                )}\r\n\r\n                                <div\r\n                                    className={`absolute w-[200px] rounded-xl border ${typeDef.border} bg-card p-0 shadow-sm transition-transform hover:scale-105 cursor-pointer`}\r\n                                    style={{ left: node.x, top: node.y }}\r\n                                >\r\n                                    {/* Header */}\r\n                                    <div className={`flex items-center justify-between border-b border-border p-3 ${typeDef.bg}`}>\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <typeDef.icon className={`h-4 w-4 ${typeDef.color}`} />\r\n                                            <span className=\"text-xs font-bold text-foreground\">{typeDef.label}</span>\r\n                                        </div>\r\n                                        <MoreHorizontal className=\"h-4 w-4 text-muted-foreground\" />\r\n                                    </div>\r\n                                    {/* Body */}\r\n                                    <div className=\"p-3\">\r\n                                        <p className=\"text-[10px] text-muted-foreground mb-2\">Configuration</p>\r\n                                        <div className=\"h-6 w-full rounded bg-black/20 border border-white/5 mb-2\"></div>\r\n                                        <div className=\"h-6 w-2/3 rounded bg-black/20 border border-white/5\"></div>\r\n                                    </div>\r\n                                    {/* Ports */}\r\n                                    <div className=\"absolute -left-1.5 top-1/2 h-3 w-3 -translate-y-1/2 rounded-full border border-white/20 bg-black\"></div>\r\n                                    <div className=\"absolute -right-1.5 top-1/2 h-3 w-3 -translate-y-1/2 rounded-full border border-primary bg-primary shadow-[0_0_10px_rgba(59,130,246,0.8)]\"></div>\r\n                                </div>\r\n                            </React.Fragment>\r\n                        );\r\n                    })}\r\n\r\n                    {/* Floating Controls */}\r\n                    <div className=\"absolute bottom-8 right-8 flex gap-2\">\r\n                        <Button className=\"rounded-full h-12 w-12 bg-primary/20 hover:bg-primary/40 text-primary border border-primary/50 shadow-[0_0_20px_rgba(59,130,246,0.3)]\">\r\n                            <Play className=\"h-5 w-5 fill-current\" />\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\app-sidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronRight' is defined but never used.","line":11,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ChevronRight"},"fix":{"range":[187,206],"text":""},"desc":"Remove unused variable \"ChevronRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Search' is defined but never used.","line":12,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Search"},"fix":{"range":[206,219],"text":""},"desc":"Remove unused variable \"Search\"."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":94,"column":21,"nodeType":"JSXOpeningElement","endLine":94,"endColumn":104}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport {\r\n    LayoutDashboard,\r\n    Package, // Inventory\r\n    ClipboardList, // Production Log\r\n    Settings,\r\n    UserCircle,\r\n    LogOut,\r\n    ChevronRight,\r\n    Search\r\n} from \"lucide-react\"\r\n\r\nimport {\r\n    Sidebar,\r\n    SidebarContent,\r\n    SidebarFooter,\r\n    SidebarHeader,\r\n    SidebarRail,\r\n    SidebarGroup,\r\n    SidebarMenu,\r\n    SidebarMenuButton,\r\n    SidebarMenuItem,\r\n    SidebarMenuSub,\r\n    SidebarMenuSubItem,\r\n    SidebarMenuSubButton,\r\n} from \"@/components/ui/sidebar\"\r\nimport Link from \"next/link\"\r\nimport { usePathname, useSearchParams } from \"next/navigation\"\r\nimport { useAuth } from \"@/lib/auth-context\"\r\nimport { Button } from \"@/components/ui/button\"\r\n\r\nexport function AppSidebar({ ...props }: React.ComponentProps<typeof Sidebar>) {\r\n    const pathname = usePathname();\r\n    const searchParams = useSearchParams();\r\n    const { user, logout } = useAuth();\r\n\r\n    const searchString = searchParams.toString();\r\n    const fullCurrentPath = searchString ? `${pathname}?${searchString}` : pathname;\r\n\r\n    // Define navigation items dynamically or filter them\r\n    const navMain = [\r\n        {\r\n            title: \"Dashboard\",\r\n            url: \"/\",\r\n            icon: LayoutDashboard,\r\n            roles: ['ADMIN', 'OPERATOR'],\r\n        },\r\n        {\r\n            title: \"Inventory\",\r\n            url: \"/inventory\",\r\n            icon: Package,\r\n            roles: ['ADMIN', 'OPERATOR'],\r\n        },\r\n        {\r\n            title: \"Production Log\",\r\n            url: \"/entry\",\r\n            icon: ClipboardList,\r\n            roles: ['ADMIN', 'OPERATOR'],\r\n        },\r\n        {\r\n            title: \"Settings\",\r\n            url: \"/settings\",\r\n            icon: Settings,\r\n            roles: ['ADMIN'],\r\n            items: [\r\n                {\r\n                    title: \"Raw Materials\",\r\n                    url: \"/settings?tab=materials\",\r\n                },\r\n                {\r\n                    title: \"Products\",\r\n                    url: \"/settings?tab=products\",\r\n                },\r\n                {\r\n                    title: \"Operators\",\r\n                    url: \"/settings?tab=operators\",\r\n                },\r\n                {\r\n                    title: \"Users\",\r\n                    url: \"/admin/users\",\r\n                }\r\n            ]\r\n        },\r\n    ];\r\n\r\n    if (!user) return null;\r\n\r\n    return (\r\n        <Sidebar collapsible=\"icon\" className=\"border-r border-sidebar-border\" {...props}>\r\n            <SidebarHeader className=\"h-16 flex items-center px-4 border-b border-sidebar-border\">\r\n                <div className=\"flex items-center gap-2 w-full group-data-[collapsible=icon]:justify-center\">\r\n                    <img src=\"/logo.jpg\" alt=\"KCF Logo\" className=\"size-8 object-contain rounded-sm\" />\r\n                    <div className=\"flex flex-col gap-0.5 group-data-[collapsible=icon]:hidden\">\r\n                        <span className=\"font-bold text-sm tracking-tight text-slate-900\">KOVAI INVENTORY</span>\r\n                        <span className=\"text-[10px] text-muted-foreground uppercase tracking-wider\">Manufacturing System</span>\r\n                    </div>\r\n                </div>\r\n            </SidebarHeader>\r\n            <SidebarContent className=\"p-2\">\r\n                <SidebarGroup>\r\n                    <SidebarMenu className=\"space-y-1\">\r\n                        {navMain.filter(item => item.roles.includes(user.role)).map((item) => {\r\n                            const isActive = pathname === item.url || (item.url !== '/' && pathname.startsWith(item.url));\r\n\r\n                            return (\r\n                                <SidebarMenuItem key={item.title}>\r\n                                    {item.items ? (\r\n                                        <SidebarMenuSub>\r\n                                            <SidebarMenuButton\r\n                                                tooltip={item.title}\r\n                                                isActive={isActive}\r\n                                                className={`font-medium ${isActive ? 'bg-primary text-primary-foreground hover:bg-primary/90 hover:text-primary-foreground shadow-sm' : 'text-muted-foreground hover:text-foreground'}`}\r\n                                            >\r\n                                                <item.icon />\r\n                                                <span>{item.title}</span>\r\n                                            </SidebarMenuButton>\r\n                                            <SidebarMenuSub>\r\n                                                {item.items.map(sub => (\r\n                                                    <SidebarMenuSubItem key={sub.title}>\r\n                                                        <SidebarMenuSubButton asChild isActive={pathname === sub.url || (sub.url.includes(\"?tab=\") && fullCurrentPath === sub.url)}>\r\n                                                            <Link href={sub.url}>\r\n                                                                <span>{sub.title}</span>\r\n                                                            </Link>\r\n                                                        </SidebarMenuSubButton>\r\n                                                    </SidebarMenuSubItem>\r\n                                                ))}\r\n                                            </SidebarMenuSub>\r\n                                        </SidebarMenuSub>\r\n                                    ) : (\r\n                                        <SidebarMenuButton\r\n                                            tooltip={item.title}\r\n                                            asChild\r\n                                            isActive={isActive}\r\n                                            className={`font-medium transition-all duration-200 ${isActive ? 'bg-blue-700 text-white hover:bg-blue-800 hover:text-white shadow-md' : 'text-slate-600 hover:bg-slate-100 hover:text-slate-900'}`}\r\n                                        >\r\n                                            <Link href={item.url}>\r\n                                                <item.icon className={isActive ? \"text-white\" : \"text-slate-500\"} />\r\n                                                <span>{item.title}</span>\r\n                                            </Link>\r\n                                        </SidebarMenuButton>\r\n                                    )}\r\n                                </SidebarMenuItem>\r\n                            )\r\n                        })}\r\n                    </SidebarMenu>\r\n                </SidebarGroup>\r\n            </SidebarContent>\r\n            <SidebarFooter className=\"border-t border-sidebar-border p-4\">\r\n                <div className=\"flex items-center gap-3 group-data-[collapsible=icon]:justify-center\">\r\n                    <div className=\"flex items-center justify-center rounded-full bg-blue-50 p-2 text-blue-600\">\r\n                        <UserCircle className=\"size-5\" />\r\n                    </div>\r\n                    <div className=\"grid flex-1 text-left text-sm leading-tight group-data-[collapsible=icon]:hidden\">\r\n                        <span className=\"truncate font-semibold text-slate-700\">{user.name}</span>\r\n                        <span className=\"truncate text-xs text-slate-500 capitalize\">{user.role}</span>\r\n                    </div>\r\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => logout()} title=\"Logout\">\r\n                        <LogOut className=\"h-4 w-4 text-red-500\" />\r\n                    </Button>\r\n                </div>\r\n            </SidebarFooter>\r\n            <SidebarRail />\r\n        </Sidebar>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\dashboard-client.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle2' is defined but never used.","line":10,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CheckCircle2"},"fix":{"range":[202,221],"text":""},"desc":"Remove unused variable \"CheckCircle2\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":11,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":10,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Clock"},"fix":{"range":[221,233],"text":""},"desc":"Remove unused variable \"Clock\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Factory' is defined but never used.","line":12,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":12,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Factory"},"fix":{"range":[233,247],"text":""},"desc":"Remove unused variable \"Factory\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MoreVertical' is defined but never used.","line":13,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"MoreVertical"},"fix":{"range":[247,266],"text":""},"desc":"Remove unused variable \"MoreVertical\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used.","line":16,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":10,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Users"},"fix":{"range":[302,314],"text":""},"desc":"Remove unused variable \"Users\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Bar' is defined but never used.","line":25,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Bar"},"fix":{"range":[430,440],"text":""},"desc":"Remove unused variable \"Bar\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BarChart' is defined but never used.","line":26,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"BarChart"},"fix":{"range":[440,455],"text":""},"desc":"Remove unused variable \"BarChart\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Cell' is defined but never used.","line":28,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Cell"},"fix":{"range":[475,486],"text":""},"desc":"Remove unused variable \"Cell\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Line' is defined but never used.","line":33,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Line"},"fix":{"range":[550,561],"text":""},"desc":"Remove unused variable \"Line\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LineChart' is defined but never used.","line":34,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"LineChart"},"fix":{"range":[561,577],"text":""},"desc":"Remove unused variable \"LineChart\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":81,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":84,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[830,833],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[830,833],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":74,"column":9,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":74,"endColumn":22,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[2338,2351],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useRef } from 'react';\r\nimport { useReactToPrint } from 'react-to-print';\r\nimport { utils, writeFile } from 'xlsx';\r\nimport {\r\n    Activity,\r\n    AlertTriangle,\r\n    Box,\r\n    CheckCircle2,\r\n    Clock,\r\n    Factory,\r\n    MoreVertical,\r\n    TrendingDown,\r\n    TrendingUp,\r\n    Users,\r\n    Zap,\r\n    Printer,\r\n    Download,\r\n    PlusCircle\r\n} from \"lucide-react\";\r\nimport {\r\n    Area,\r\n    AreaChart,\r\n    Bar,\r\n    BarChart,\r\n    CartesianGrid,\r\n    Cell,\r\n    ResponsiveContainer,\r\n    Tooltip,\r\n    XAxis,\r\n    YAxis,\r\n    Line,\r\n    LineChart\r\n} from \"recharts\";\r\nimport Link from 'next/link';\r\n\r\nimport { DailyReport } from \"@/types\";\r\n\r\n\r\n\r\ninterface DashboardClientProps {\r\n    initialReport: DailyReport;\r\n}\r\n\r\nconst StatCard = ({ title, value, subtext, icon: Icon, trend, trendUp, alert }: any) => (\r\n    <div className={`relative overflow-hidden rounded-lg border p-6 shadow-sm transition-all hover:shadow-md ${alert ? 'border-red-200 bg-red-50/50' : 'border-slate-200 bg-white'}`}>\r\n        <div className=\"flex items-center justify-between\">\r\n            <div>\r\n                <p className=\"text-sm font-medium text-slate-500\">{title}</p>\r\n                <h3 className={`mt-2 text-3xl font-bold ${alert ? 'text-red-700' : 'text-slate-900'}`}>{value}</h3>\r\n            </div>\r\n            <div className={`flex h-12 w-12 items-center justify-center rounded-lg ${alert ? 'bg-red-100 text-red-600' : 'bg-blue-50 text-blue-600'}`}>\r\n                <Icon className=\"h-6 w-6\" />\r\n            </div>\r\n        </div>\r\n        <div className=\"mt-4 flex items-center gap-2\">\r\n            {trend && (\r\n                <span className={`flex items-center text-sm font-medium ${trendUp ? 'text-green-600' : 'text-red-600'}`}>\r\n                    {trendUp ? <TrendingUp className=\"mr-1 h-4 w-4\" /> : <TrendingDown className=\"mr-1 h-4 w-4\" />}\r\n                    {trend}\r\n                </span>\r\n            )}\r\n            <span className=\"text-sm text-slate-400\">{subtext}</span>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport function DashboardClient({ initialReport }: DashboardClientProps) {\r\n    const componentRef = useRef<HTMLDivElement>(null);\r\n    const { records, totalMaterialUsed, averageEfficiency, totalProduced, alerts } = initialReport;\r\n\r\n    const handlePrint = useReactToPrint({\r\n        // @ts-ignore\r\n        content: () => componentRef.current,\r\n        documentTitle: `Production_Report_${new Date().toISOString().split('T')[0]}`,\r\n    });\r\n\r\n    const handleExportExcel = () => {\r\n        const data = records.map(r => ({\r\n            BatchID: r.batchId,\r\n            Date: new Date(r.date).toLocaleDateString(),\r\n            Material: r.rawMaterial.name,\r\n            Input_Qty: r.rawMaterial.quantity,\r\n            Product: r.finishedProduct.name,\r\n            Output_Qty: r.finishedProduct.quantity,\r\n            Efficiency_Percent: r.efficiency.toFixed(2),\r\n            Status: r.status\r\n        }));\r\n        const ws = utils.json_to_sheet(data);\r\n        const wb = utils.book_new();\r\n        utils.book_append_sheet(wb, ws, \"Production Log\");\r\n        writeFile(wb, `Production_Report_${new Date().toISOString().split('T')[0]}.xlsx`);\r\n    };\r\n\r\n    // Transform records for Chart\r\n    // Sort records by date/time ideally, but for now just mapping\r\n    const chartData = records.map((r, i) => ({\r\n        name: r.batchId || `Batch ${i}`,\r\n        efficiency: r.efficiency,\r\n        output: r.finishedProduct.quantity,\r\n        target: r.finishedProduct.quantity * 1.1 // Mock target\r\n    })).slice(0, 10); // Take last 10\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Top Actions */}\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold tracking-tight text-slate-900\">Dashboard</h1>\r\n                    <p className=\"text-slate-500 mt-1\">Production overview and daily metrics</p>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                    <Link href=\"/entry\" className=\"flex items-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 shadow-sm transition-all focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\">\r\n                        <PlusCircle className=\"h-4 w-4\" />\r\n                        Log Production\r\n                    </Link>\r\n                    <button onClick={() => handlePrint && handlePrint()} className=\"flex items-center gap-2 rounded-md border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-colors\">\r\n                        <Printer className=\"h-4 w-4\" />\r\n                        Print\r\n                    </button>\r\n                    <button onClick={handleExportExcel} className=\"flex items-center gap-2 rounded-md border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-colors\">\r\n                        <Download className=\"h-4 w-4\" />\r\n                        Export\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Printable Area */}\r\n            <div ref={componentRef} className=\"space-y-6 print:p-8\">\r\n\r\n                {/* Header Stats */}\r\n                <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-4\">\r\n                    <StatCard\r\n                        title=\"Total Output\"\r\n                        value={totalProduced}\r\n                        subtext=\"units produced\"\r\n                        icon={Box}\r\n                        trend=\"+0%\"\r\n                        trendUp={true}\r\n                    />\r\n                    <StatCard\r\n                        title=\"Avg Efficiency\"\r\n                        value={`${averageEfficiency.toFixed(1)}%`}\r\n                        subtext=\"vs target\"\r\n                        icon={Activity}\r\n                        trend={averageEfficiency > 85 ? \"Optimal\" : \"Needs Review\"}\r\n                        trendUp={averageEfficiency > 85}\r\n                    />\r\n                    <StatCard\r\n                        title=\"Raw Material\"\r\n                        value={`${totalMaterialUsed}kg`}\r\n                        subtext=\"processed today\"\r\n                        icon={Zap} // Replaced Layers with Zap or Box\r\n                        trend=\"Normal usage\"\r\n                        trendUp={true}\r\n                    />\r\n                    <StatCard\r\n                        title=\"System Alerts\"\r\n                        value={alerts.length}\r\n                        subtext=\"active notifications\"\r\n                        icon={AlertTriangle}\r\n                        alert={alerts.length > 0}\r\n                    />\r\n                </div>\r\n\r\n                {/* Main Chart */}\r\n                <div className=\"rounded-lg border border-slate-200 bg-white p-6 shadow-sm lg:col-span-3\">\r\n                    <div className=\"mb-6 flex items-center justify-between\">\r\n                        <div>\r\n                            <h3 className=\"text-lg font-bold text-slate-900\">Efficiency Trends</h3>\r\n                            <p className=\"text-sm text-slate-500\">Recent batch performance</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"h-[300px] w-full\">\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            <AreaChart data={chartData}>\r\n                                <defs>\r\n                                    <linearGradient id=\"colorEfficiency\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                        <stop offset=\"5%\" stopColor=\"#2563EB\" stopOpacity={0.1} />\r\n                                        <stop offset=\"95%\" stopColor=\"#2563EB\" stopOpacity={0} />\r\n                                    </linearGradient>\r\n                                </defs>\r\n                                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#E2E8F0\" />\r\n                                <XAxis dataKey=\"name\" axisLine={false} tickLine={false} tick={{ fontSize: 12, fill: '#64748B' }} />\r\n                                <YAxis axisLine={false} tickLine={false} tick={{ fontSize: 12, fill: '#64748B' }} />\r\n                                <Tooltip\r\n                                    contentStyle={{ borderRadius: '8px', border: 'none', boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)' }}\r\n                                />\r\n                                <Area\r\n                                    type=\"monotone\"\r\n                                    dataKey=\"efficiency\"\r\n                                    stroke=\"#2563EB\"\r\n                                    strokeWidth={2}\r\n                                    fillOpacity={1}\r\n                                    fill=\"url(#colorEfficiency)\"\r\n                                />\r\n                            </AreaChart>\r\n                        </ResponsiveContainer>\r\n                    </div>\r\n                </div>\r\n                {/* Detailed Records Table */}\r\n                <div className=\"rounded-lg border border-slate-200 bg-white shadow-sm overflow-hidden\">\r\n                    <div className=\"flex items-center justify-between border-b border-slate-100 p-6\">\r\n                        <div>\r\n                            <h3 className=\"text-lg font-bold text-slate-900\">Production Batches</h3>\r\n                            <p className=\"text-sm text-slate-500\">Detailed logs of recent activity</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"overflow-x-auto\">\r\n                        <table className=\"w-full text-sm text-left\">\r\n                            <thead className=\"text-xs text-slate-500 uppercase bg-slate-50\">\r\n                                <tr>\r\n                                    <th className=\"px-6 py-3 font-semibold\">Batch ID</th>\r\n                                    <th className=\"px-6 py-3 font-semibold\">Material</th>\r\n                                    <th className=\"px-6 py-3 font-semibold\">Input/Output</th>\r\n                                    <th className=\"px-6 py-3 font-semibold\">Efficiency</th>\r\n                                    <th className=\"px-6 py-3 font-semibold text-right\">Status</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {records.map((record) => (\r\n                                    <tr key={record.id} className=\"bg-white border-b border-slate-100 hover:bg-slate-50 transition-colors\">\r\n                                        <td className=\"px-6 py-4 font-medium text-slate-900\">\r\n                                            {record.batchId || record.id.substring(0, 6)}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 text-slate-600\">\r\n                                            {record.rawMaterial.name}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 text-slate-600\">\r\n                                            {record.rawMaterial.quantity}kg → {record.finishedProduct.quantity} units\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <span className={`font-medium ${record.efficiency >= 85 ? 'text-green-600' : 'text-amber-600'}`}>\r\n                                                {record.efficiency.toFixed(1)}%\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 text-right\">\r\n                                            <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border\r\n                                        ${record.status === 'optimal' ? 'bg-green-50 text-green-700 border-green-200' :\r\n                                                    record.status === 'critical' ? 'bg-red-50 text-red-700 border-red-200' :\r\n                                                        'bg-amber-50 text-amber-700 border-amber-200'\r\n                                                }`}>\r\n                                                {record.status}\r\n                                            </span>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                                {records.length === 0 && (\r\n                                    <tr>\r\n                                        <td colSpan={5} className=\"px-6 py-8 text-center text-slate-500\">\r\n                                            No records found. Start production to see data here.\r\n                                        </td>\r\n                                    </tr>\r\n                                )}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\dashboard-view.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":9,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":10,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Clock"},"fix":{"range":[116,128],"text":""},"desc":"Remove unused variable \"Clock\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Zap' is defined but never used.","line":15,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Zap"},"fix":{"range":[209,219],"text":""},"desc":"Remove unused variable \"Zap\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Bar' is defined but never used.","line":20,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Bar"},"fix":{"range":[279,289],"text":""},"desc":"Remove unused variable \"Bar\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BarChart' is defined but never used.","line":21,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"BarChart"},"fix":{"range":[289,304],"text":""},"desc":"Remove unused variable \"BarChart\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Cell' is defined but never used.","line":23,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Cell"},"fix":{"range":[324,335],"text":""},"desc":"Remove unused variable \"Cell\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":81,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":84,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1176,1179],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1176,1179],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":71,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2449,2452],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2449,2452],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport {\r\n    Activity,\r\n    AlertTriangle,\r\n    Box,\r\n    CheckCircle2,\r\n    Clock,\r\n    Factory,\r\n    MoreVertical,\r\n    TrendingDown,\r\n    TrendingUp,\r\n    Users,\r\n    Zap\r\n} from \"lucide-react\";\r\nimport {\r\n    Area,\r\n    AreaChart,\r\n    Bar,\r\n    BarChart,\r\n    CartesianGrid,\r\n    Cell,\r\n    ResponsiveContainer,\r\n    Tooltip,\r\n    XAxis,\r\n    YAxis,\r\n} from \"recharts\";\r\n\r\n// Mock Data\r\nconst productionData = [\r\n    { time: \"06:00\", output: 120, target: 150 },\r\n    { time: \"08:00\", output: 145, target: 150 },\r\n    { time: \"10:00\", output: 160, target: 150 },\r\n    { time: \"12:00\", output: 130, target: 150 },\r\n    { time: \"14:00\", output: 170, target: 150 },\r\n    { time: \"16:00\", output: 155, target: 150 },\r\n    { time: \"18:00\", output: 140, target: 150 },\r\n];\r\n\r\nconst machineStatus = [\r\n    { name: \"CNC-01\", status: \"Running\", efficiency: 92 },\r\n    { name: \"CNC-02\", status: \"Running\", efficiency: 88 },\r\n    { name: \"Milling-A\", status: \"Downtime\", efficiency: 0 },\r\n    { name: \"Lathe-X1\", status: \"Running\", efficiency: 95 },\r\n];\r\n\r\nconst StatCard = ({ title, value, subtext, icon: Icon, trend, trendUp, alert }: any) => (\r\n    <div className={`relative overflow-hidden rounded-lg border bg-white p-6 shadow-sm transition-all hover:shadow-md ${alert ? 'border-red-200 bg-red-50/50' : 'border-slate-200'}`}>\r\n        <div className=\"flex items-center justify-between\">\r\n            <div>\r\n                <p className=\"text-sm font-medium text-slate-500\">{title}</p>\r\n                <h3 className={`mt-2 text-3xl font-bold ${alert ? 'text-red-700' : 'text-slate-900'}`}>{value}</h3>\r\n            </div>\r\n            <div className={`flex h-12 w-12 items-center justify-center rounded-lg ${alert ? 'bg-red-100 text-red-600' : 'bg-blue-50 text-blue-600'}`}>\r\n                <Icon className=\"h-6 w-6\" />\r\n            </div>\r\n        </div>\r\n        <div className=\"mt-4 flex items-center gap-2\">\r\n            {trend && (\r\n                <span className={`flex items-center text-sm font-medium ${trendUp ? 'text-green-600' : 'text-red-600'}`}>\r\n                    {trendUp ? <TrendingUp className=\"mr-1 h-4 w-4\" /> : <TrendingDown className=\"mr-1 h-4 w-4\" />}\r\n                    {trend}\r\n                </span>\r\n            )}\r\n            <span className=\"text-sm text-slate-400\">{subtext}</span>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nconst MachineCard = ({ name, status, efficiency }: any) => (\r\n    <div className=\"flex items-center justify-between rounded-lg border border-slate-100 bg-white p-4 shadow-sm transition-colors hover:border-blue-100\">\r\n        <div className=\"flex items-center gap-4\">\r\n            <div className={`flex h-10 w-10 items-center justify-center rounded-full ${status === 'Running' ? 'bg-green-100 text-green-600' : 'bg-red-100 text-red-600'}`}>\r\n                <Factory className=\"h-5 w-5\" />\r\n            </div>\r\n            <div>\r\n                <h4 className=\"font-semibold text-slate-900\">{name}</h4>\r\n                <p className=\"text-xs font-medium text-slate-500\">{status}</p>\r\n            </div>\r\n        </div>\r\n        <div className=\"text-right\">\r\n            <div className=\"text-lg font-bold text-slate-900\">{efficiency}%</div>\r\n            <p className=\"text-xs text-slate-400\">Efficiency</p>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport function DashboardView() {\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header Stats */}\r\n            <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-4\">\r\n                <StatCard\r\n                    title=\"Daily Production\"\r\n                    value=\"1,248\"\r\n                    subtext=\"units produced\"\r\n                    icon={Box}\r\n                    trend=\"+12.5%\"\r\n                    trendUp={true}\r\n                />\r\n                <StatCard\r\n                    title=\"Active Machines\"\r\n                    value=\"7/8\"\r\n                    subtext=\"machines running\"\r\n                    icon={Activity}\r\n                    trend=\"92% Uptime\"\r\n                    trendUp={true}\r\n                />\r\n                <StatCard\r\n                    title=\"Operators\"\r\n                    value=\"14\"\r\n                    subtext=\"active on shift\"\r\n                    icon={Users}\r\n                    trend=\"Full Capacity\"\r\n                    trendUp={true}\r\n                />\r\n                <StatCard\r\n                    title=\"Critical Alerts\"\r\n                    value=\"2\"\r\n                    subtext=\"require attention\"\r\n                    icon={AlertTriangle}\r\n                    alert={true}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-3\">\r\n                {/* Main Chart */}\r\n                <div className=\"rounded-lg border border-slate-200 bg-white p-6 shadow-sm lg:col-span-2\">\r\n                    <div className=\"mb-6 flex items-center justify-between\">\r\n                        <div>\r\n                            <h3 className=\"text-lg font-bold text-slate-900\">Production Output</h3>\r\n                            <p className=\"text-sm text-slate-500\">Hourly production vs Target</p>\r\n                        </div>\r\n                        <select className=\"rounded-md border border-slate-200 px-3 py-1 text-sm text-slate-600\">\r\n                            <option>Today</option>\r\n                            <option>Yesterday</option>\r\n                            <option>This Week</option>\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"h-[300px] w-full\">\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            <AreaChart data={productionData}>\r\n                                <defs>\r\n                                    <linearGradient id=\"colorOutput\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                        <stop offset=\"5%\" stopColor=\"#2563EB\" stopOpacity={0.1} />\r\n                                        <stop offset=\"95%\" stopColor=\"#2563EB\" stopOpacity={0} />\r\n                                    </linearGradient>\r\n                                </defs>\r\n                                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#E2E8F0\" />\r\n                                <XAxis dataKey=\"time\" axisLine={false} tickLine={false} tick={{ fontSize: 12, fill: '#64748B' }} />\r\n                                <YAxis axisLine={false} tickLine={false} tick={{ fontSize: 12, fill: '#64748B' }} />\r\n                                <Tooltip\r\n                                    contentStyle={{ borderRadius: '8px', border: 'none', boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)' }}\r\n                                />\r\n                                <Area\r\n                                    type=\"monotone\"\r\n                                    dataKey=\"output\"\r\n                                    stroke=\"#2563EB\"\r\n                                    strokeWidth={2}\r\n                                    fillOpacity={1}\r\n                                    fill=\"url(#colorOutput)\"\r\n                                />\r\n                                <Area\r\n                                    type=\"monotone\"\r\n                                    dataKey=\"target\"\r\n                                    stroke=\"#94A3B8\"\r\n                                    strokeWidth={2}\r\n                                    strokeDasharray=\"4 4\"\r\n                                    fill=\"none\"\r\n                                />\r\n                            </AreaChart>\r\n                        </ResponsiveContainer>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Machine Status */}\r\n                <div className=\"rounded-lg border border-slate-200 bg-white p-6 shadow-sm\">\r\n                    <div className=\"mb-6 flex items-center justify-between\">\r\n                        <h3 className=\"text-lg font-bold text-slate-900\">Machine Status</h3>\r\n                        <span className=\"flex h-6 items-center justify-center rounded-full bg-blue-100 px-2 text-xs font-semibold text-blue-700\">Live</span>\r\n                    </div>\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        {machineStatus.map((machine, i) => (\r\n                            <MachineCard key={i} {...machine} />\r\n                        ))}\r\n                    </div>\r\n                    <button className=\"mt-6 w-full rounded-md bg-slate-50 py-2 text-sm font-medium text-blue-600 transition-colors hover:bg-blue-50 hover:text-blue-700\">\r\n                        View All Machines\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Recent Alerts Table / List */}\r\n            <div className=\"rounded-lg border border-slate-200 bg-white shadow-sm\">\r\n                <div className=\"flex items-center justify-between border-b border-slate-100 p-6\">\r\n                    <div>\r\n                        <h3 className=\"text-lg font-bold text-slate-900\">Recent Alerts & Notifications</h3>\r\n                        <p className=\"text-sm text-slate-500\">System warnings and production updates</p>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    {[1, 2, 3].map((i) => (\r\n                        <div key={i} className=\"flex items-center justify-between border-b border-slate-50 p-4 last:border-0 hover:bg-slate-50\">\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <div className={`flex h-10 w-10 items-center justify-center rounded-full ${i === 1 ? 'bg-red-100 text-red-600' : 'bg-blue-100 text-blue-600'}`}>\r\n                                    {i === 1 ? <AlertTriangle className=\"h-5 w-5\" /> : <CheckCircle2 className=\"h-5 w-5\" />}\r\n                                </div>\r\n                                <div>\r\n                                    <h4 className=\"text-sm font-semibold text-slate-900\">\r\n                                        {i === 1 ? 'Machine Breakdown: Milling-A' : 'Production Batch #204 Completed'}\r\n                                    </h4>\r\n                                    <p className=\"text-xs text-slate-500\">\r\n                                        {i === 1 ? 'Critical Failure - Hydraulic pump malfunction' : 'Target reached ahead of schedule'}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <span className=\"text-xs text-slate-400\">24 mins ago</span>\r\n                                <button className=\"rounded p-1 hover:bg-slate-200\">\r\n                                    <MoreVertical className=\"h-4 w-4 text-slate-400\" />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\inventory-manager.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Edit' is defined but never used.","line":34,"column":61,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":65,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Edit"},"fix":{"range":[710,716],"text":""},"desc":"Remove unused variable \"Edit\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogTrigger' is defined but never used.","line":46,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":18,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"DialogTrigger"},"fix":{"range":[1027,1047],"text":""},"desc":"Remove unused variable \"DialogTrigger\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1645,1648],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1645,1648],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":111,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":111,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":124,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":124,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":136,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":136,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":535,"column":112,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":535,"endColumn":115,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30521,30524],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30521,30524],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow\r\n} from \"@/components/ui/table\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle\r\n} from \"@/components/ui/card\";\r\nimport {\r\n    Tabs,\r\n    TabsContent,\r\n    TabsList,\r\n    TabsTrigger\r\n} from \"@/components/ui/tabs\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Download, ArrowLeft, Box, Truck, X, AlertTriangle, Edit, Trash2 } from \"lucide-react\";\r\nimport { DispatchRecord, ProductStock } from \"@/types/inventory\";\r\nimport { utils, writeFile } from 'xlsx';\r\n\r\nimport { useAuth } from \"@/lib/auth-context\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\n\r\ninterface InventoryManagerProps {\r\n    initialStock: ProductStock[];\r\n    initialHistory: DispatchRecord[];\r\n}\r\n\r\nexport function InventoryManager({ initialStock, initialHistory }: InventoryManagerProps) {\r\n    const { user } = useAuth();\r\n    const isAdmin = user?.role === 'ADMIN';\r\n    const [history, setHistory] = useState(initialHistory);\r\n    const [productionHistory, setProductionHistory] = useState<any[]>([]); // To be fetched\r\n    const [selectedProduct, setSelectedProduct] = useState<string | null>(null);\r\n    const [filterProduct, setFilterProduct] = useState<string | null>(null);\r\n\r\n    // Dispatch Dialog State\r\n    const [isDispatchOpen, setIsDispatchOpen] = useState(false);\r\n    const [dispatchForm, setDispatchForm] = useState({\r\n        productName: \"\",\r\n        quantity: 0,\r\n        destination: \"Customer\",\r\n        destinationDetail: \"\",\r\n        notes: \"\"\r\n    });\r\n\r\n    const handleDispatchSubmit = async () => {\r\n        try {\r\n            const res = await fetch('/api/inventory', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    ...dispatchForm,\r\n                    date: new Date().toISOString().split('T')[0],\r\n                    timestamp: new Date().toISOString()\r\n                })\r\n            });\r\n\r\n            if (res.ok) {\r\n                const newRecord = await res.json();\r\n                setHistory([newRecord, ...history]);\r\n                setIsDispatchOpen(false);\r\n                setDispatchForm({ productName: \"\", quantity: 0, destination: \"Customer\", destinationDetail: \"\", notes: \"\" });\r\n                // Note: ideally trigger a re-fetch of stock data here\r\n                alert(\"Dispatch recorded successfully!\");\r\n                utils.book_new(); // Just to suppress unused variable warning if any (dummy call)\r\n                window.location.reload(); // Quick refresh to update stock levels\r\n            } else {\r\n                alert(\"Failed to record dispatch\");\r\n            }\r\n        } catch (e) {\r\n            console.error(e);\r\n            alert(\"Error submitting dispatch\");\r\n        }\r\n    };\r\n\r\n\r\n    // Fetch Production History on mount or when tab changes\r\n    const fetchProductionHistory = async () => {\r\n        try {\r\n            const res = await fetch('/api/production');\r\n            if (res.ok) setProductionHistory(await res.json());\r\n        } catch (e) {\r\n            console.error(\"Failed to fetch production logs\");\r\n        }\r\n    };\r\n\r\n    const handleDeleteDispatch = async (id: string) => {\r\n        if (!confirm(\"Are you sure you want to delete this dispatch record?\")) return;\r\n        try {\r\n            const res = await fetch(`/api/inventory?id=${id}`, { method: 'DELETE' });\r\n            if (res.ok) {\r\n                setHistory(history.filter(h => h.id !== id));\r\n                // Ideally refresh stock data too, but for now just update list\r\n            }\r\n        } catch (e) {\r\n            alert(\"Failed to delete\");\r\n        }\r\n    };\r\n\r\n    const handleDeleteProduction = async (id: string) => {\r\n        if (!confirm(\"Are you sure you want to delete this production record?\")) return;\r\n        try {\r\n            const res = await fetch(`/api/production?id=${id}`, { method: 'DELETE' });\r\n            if (res.ok) {\r\n                setProductionHistory(productionHistory.filter(p => p.id !== id));\r\n            }\r\n        } catch (e) {\r\n            alert(\"Failed to delete\");\r\n        }\r\n    };\r\n\r\n    const handleExport = () => {\r\n        const wb = utils.book_new();\r\n\r\n        const wsStock = utils.json_to_sheet(initialStock.map(s => ({\r\n            Product: s.name,\r\n            Produced: s.totalProduced,\r\n            Dispatched: s.totalDispatched,\r\n            Stock: s.currentStock,\r\n            Status: s.currentStock < s.minStockLevel ? 'LOW' : 'OK'\r\n        })));\r\n        utils.book_append_sheet(wb, wsStock, \"Stock Levels\");\r\n\r\n        const wsHistory = utils.json_to_sheet(initialHistory.map(h => ({\r\n            Date: h.date,\r\n            Product: h.productName,\r\n            Quantity: h.quantity,\r\n            Destination: h.destination,\r\n            Detail: h.destinationDetail,\r\n            Notes: h.notes\r\n        })));\r\n        utils.book_append_sheet(wb, wsHistory, \"Dispatch History\");\r\n\r\n        writeFile(wb, `Inventory_Report_${new Date().toISOString().split('T')[0]}.xlsx`);\r\n    };\r\n\r\n    // --- DETAIL VIEW ---\r\n    if (selectedProduct) {\r\n        const productStats = initialStock.find(p => p.name === selectedProduct);\r\n        const productHistory = initialHistory.filter(h => h.productName === selectedProduct);\r\n\r\n        return (\r\n            <div className=\"space-y-6 pt-6 animate-in fade-in slide-in-from-right-4 duration-300\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => setSelectedProduct(null)}>\r\n                        <ArrowLeft className=\"h-5 w-5\" />\r\n                    </Button>\r\n                    <div>\r\n                        <h2 className=\"text-2xl font-bold tracking-tight text-foreground\">{selectedProduct}</h2>\r\n                        <p className=\"text-muted-foreground\">Product Details & Ledger</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* KPI Cards for Product */}\r\n                <div className=\"grid gap-4 md:grid-cols-3\">\r\n                    <Card className=\"bg-primary/5 border-primary/20\">\r\n                        <CardHeader className=\"pb-2\">\r\n                            <CardTitle className=\"text-sm font-medium text-muted-foreground\">Current Stock</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"text-3xl font-bold text-primary\">{productStats?.currentStock || 0}</div>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card>\r\n                        <CardHeader className=\"pb-2\">\r\n                            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                                <Box className=\"h-4 w-4\" /> Total Produced\r\n                            </CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"text-2xl font-bold\">{productStats?.totalProduced || 0}</div>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card>\r\n                        <CardHeader className=\"pb-2\">\r\n                            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                                <Truck className=\"h-4 w-4\" /> Total Dispatched\r\n                            </CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"text-2xl font-bold\">{productStats?.totalDispatched || 0}</div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n\r\n                <Card className=\"border-border/50\">\r\n                    <CardHeader>\r\n                        <CardTitle>Dispatch History</CardTitle>\r\n                        <CardDescription>Ledger of all movements for {selectedProduct}</CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"rounded-md border border-border\">\r\n                            <Table>\r\n                                <TableHeader>\r\n                                    <TableRow className=\"bg-muted/5\">\r\n                                        <TableHead>Date</TableHead>\r\n                                        <TableHead>Destination</TableHead>\r\n                                        <TableHead>Detail</TableHead>\r\n                                        <TableHead>Notes</TableHead>\r\n                                        <TableHead className=\"text-right\">Quantity</TableHead>\r\n                                    </TableRow>\r\n                                </TableHeader>\r\n                                <TableBody>\r\n                                    {productHistory.length === 0 && (\r\n                                        <TableRow>\r\n                                            <TableCell colSpan={5} className=\"text-center py-10 text-muted-foreground\">\r\n                                                No dispatch history for this product.\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    )}\r\n                                    {productHistory.map((log) => (\r\n                                        <TableRow key={log.id} className=\"hover:bg-muted/50 transition-colors\">\r\n                                            <TableCell className=\"font-mono text-sm text-muted-foreground\">{new Date(log.date).toLocaleDateString()}</TableCell>\r\n                                            <TableCell>\r\n                                                <Badge variant=\"secondary\" className={`shadow-none ${log.destination === 'Customer' ? 'bg-blue-500/10 text-blue-500 border-blue-500/20' : 'bg-purple-500/10 text-purple-500 border-purple-500/20'}`}>\r\n                                                    {log.destination}\r\n                                                </Badge>\r\n                                            </TableCell>\r\n                                            <TableCell>{log.destinationDetail || '-'}</TableCell>\r\n                                            <TableCell className=\"text-muted-foreground italic\">{log.notes || '-'}</TableCell>\r\n                                            <TableCell className=\"text-right font-bold\">{log.quantity}</TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // --- MAIN VIEW ---\r\n    return (\r\n        <div className=\"space-y-8 pt-6 animate-in fade-in slide-in-from-left-4 duration-300\">\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                <div>\r\n                    <h2 className=\"text-3xl font-bold tracking-tight text-foreground\">Inventory Management</h2>\r\n                    <p className=\"text-muted-foreground mt-1\">Track stock levels and dispatch history.</p>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <Button onClick={() => setIsDispatchOpen(true)} className=\"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white shadow-sm\">\r\n                        <Truck className=\"h-4 w-4\" /> Dispatch Stock\r\n                    </Button>\r\n                    <Button onClick={handleExport} variant=\"outline\" className=\"flex items-center gap-2 border-primary/20 hover:bg-primary/5\">\r\n                        <Download className=\"h-4 w-4\" /> Export Report\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Stock Alert Banner (Dynamic based on low stock items) */}\r\n            {initialStock.some(s => s.currentStock < s.minStockLevel) && (\r\n                <div className=\"rounded-lg border border-orange-200 bg-orange-50 p-4 text-orange-800 flex items-start gap-3\">\r\n                    <div className=\"bg-orange-100 p-1.5 rounded-full\">\r\n                        <AlertTriangle className=\"h-5 w-5 text-orange-600\" />\r\n                    </div>\r\n                    <div>\r\n                        <h4 className=\"font-semibold text-sm\">Low Stock Alert</h4>\r\n                        <p className=\"text-xs text-orange-700/80 mt-1\">\r\n                            {initialStock.filter(s => s.currentStock < s.minStockLevel).length} items are below minimum stock level. Please review and restock immediately.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <Tabs defaultValue=\"stock\" className=\"w-full\">\r\n                <TabsList className=\"grid w-full grid-cols-3 lg:w-[600px] mb-4\">\r\n                    <TabsTrigger value=\"stock\">Stock Overview</TabsTrigger>\r\n                    <TabsTrigger value=\"history\">Dispatch History</TabsTrigger>\r\n                    <TabsTrigger value=\"production\" onClick={fetchProductionHistory}>Production History</TabsTrigger>\r\n                </TabsList>\r\n\r\n                {/* STOCK TAB */}\r\n                <TabsContent value=\"stock\" className=\"space-y-4\">\r\n                    <Card className=\"border-border/50\">\r\n                        <CardHeader className=\"flex flex-row flex-wrap items-center justify-between gap-4 pb-2\">\r\n                            <div className=\"space-y-1\">\r\n                                <CardTitle>Produced Components Stock</CardTitle>\r\n                                <CardDescription>Select a product to view detailed ledger.</CardDescription>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <Select value={filterProduct || \"all\"} onValueChange={(val) => setFilterProduct(val === \"all\" ? null : val)}>\r\n                                    <SelectTrigger className=\"w-[280px]\">\r\n                                        <SelectValue placeholder=\"Filter by Product\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        <SelectItem value=\"all\">All Products</SelectItem>\r\n                                        {initialStock.map((p) => (\r\n                                            <SelectItem key={p.name} value={p.name}>{p.name}</SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                                {filterProduct && (\r\n                                    <Button variant=\"ghost\" size=\"icon\" onClick={() => setFilterProduct(null)}>\r\n                                        <X className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                )}\r\n                            </div>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"rounded-md border border-border\">\r\n                                <Table>\r\n                                    <TableHeader>\r\n                                        <TableRow className=\"bg-muted/30 hover:bg-muted/30 border-b border-border\">\r\n                                            <TableHead className=\"w-[30%] font-semibold text-slate-700\">Product Name</TableHead>\r\n                                            <TableHead className=\"text-right font-semibold text-slate-700\">Total Produced</TableHead>\r\n                                            <TableHead className=\"text-right font-semibold text-slate-700\">Total Dispatched</TableHead>\r\n                                            <TableHead className=\"text-right font-semibold text-slate-700\">Current Stock</TableHead>\r\n                                            <TableHead className=\"text-center font-semibold text-slate-700\">Status</TableHead>\r\n                                            <TableHead className=\"w-[50px]\"></TableHead>\r\n                                        </TableRow>\r\n                                    </TableHeader>\r\n                                    <TableBody>\r\n                                        {initialStock.length === 0 && (\r\n                                            <TableRow>\r\n                                                <TableCell colSpan={5} className=\"text-center py-10 text-muted-foreground\">\r\n                                                    No production data available.\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        )}\r\n                                        {initialStock\r\n                                            .filter(item => item.type === 'FINISHED')\r\n                                            .filter(item => !filterProduct || item.name === filterProduct)\r\n                                            .map((item) => (\r\n                                                <TableRow\r\n                                                    key={item.name}\r\n                                                    className=\"hover:bg-muted/50 transition-colors cursor-pointer group\"\r\n                                                    onClick={() => setSelectedProduct(item.name)}\r\n                                                >\r\n                                                    <TableCell className=\"font-medium text-foreground group-hover:text-primary transition-colors\">{item.name}</TableCell>\r\n                                                    <TableCell className=\"text-right\">{item.totalProduced}</TableCell>\r\n                                                    <TableCell className=\"text-right\">{item.totalDispatched}</TableCell>\r\n                                                    <TableCell className=\"text-right\">\r\n                                                        <span className={`font-bold text-lg ${item.currentStock < 50 ? 'text-red-500' : 'text-emerald-500'}`}>\r\n                                                            {item.currentStock}\r\n                                                        </span>\r\n                                                    </TableCell>\r\n                                                    <TableCell className=\"text-center\">\r\n                                                        {item.currentStock < 50 ? (\r\n                                                            <Badge variant=\"destructive\" className=\"bg-red-500/10 text-red-500 hover:bg-red-500/20 border-red-500/20 shadow-none\">Low Stock</Badge>\r\n                                                        ) : (\r\n                                                            <Badge variant=\"outline\" className=\"bg-emerald-500/10 text-emerald-500 border-emerald-500/20 shadow-none\">Optimal</Badge>\r\n                                                        )}\r\n                                                    </TableCell>\r\n                                                </TableRow>\r\n                                            ))}\r\n                                    </TableBody>\r\n                                </Table>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </TabsContent>\r\n\r\n                {/* HISTORY TAB */}\r\n                <TabsContent value=\"history\" className=\"space-y-4\">\r\n                    <Card className=\"border-border/50\">\r\n                        <CardHeader>\r\n                            <CardTitle>Dispatch Log</CardTitle>\r\n                            <CardDescription>History of all finalized customer shipments.</CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"rounded-md border border-border\">\r\n                                <Table>\r\n                                    <TableHeader>\r\n                                        <TableRow className=\"bg-muted/5\">\r\n                                            <TableHead>Date</TableHead>\r\n                                            <TableHead>Product</TableHead>\r\n                                            <TableHead>Destination</TableHead>\r\n                                            <TableHead>Detail</TableHead>\r\n                                            <TableHead className=\"text-right\">Quantity</TableHead>\r\n                                            {isAdmin && <TableHead className=\"w-[50px]\"></TableHead>}\r\n                                        </TableRow>\r\n                                    </TableHeader>\r\n                                    <TableBody>\r\n                                        {initialHistory.length === 0 && (\r\n                                            <TableRow>\r\n                                                <TableCell colSpan={5} className=\"text-center py-10 text-muted-foreground\">\r\n                                                    No dispatch records found.\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        )}\r\n                                        {initialHistory.map((log) => (\r\n                                            <TableRow key={log.id} className=\"hover:bg-muted/50 transition-colors\">\r\n                                                <TableCell className=\"font-mono text-sm text-muted-foreground\">{new Date(log.date).toLocaleDateString()}</TableCell>\r\n                                                <TableCell className=\"font-medium\">{log.productName}</TableCell>\r\n                                                <TableCell>\r\n                                                    <Badge variant=\"secondary\" className={`shadow-none ${log.destination === 'Customer' ? 'bg-blue-500/10 text-blue-500 border-blue-500/20' : 'bg-purple-500/10 text-purple-500 border-purple-500/20'}`}>\r\n                                                        {log.destination}\r\n                                                    </Badge>\r\n                                                </TableCell>\r\n                                                <TableCell className=\"text-muted-foreground\">{log.destinationDetail || '-'}</TableCell>\r\n                                                <TableCell className=\"text-right font-bold\">{log.quantity}</TableCell>\r\n                                                {isAdmin && (\r\n                                                    <TableCell>\r\n                                                        <Button variant=\"ghost\" size=\"icon\" onClick={() => handleDeleteDispatch(log.id)} className=\"h-8 w-8 text-red-500 hover:text-red-700 hover:bg-red-100\">\r\n                                                            <Trash2 className=\"h-4 w-4\" />\r\n                                                        </Button>\r\n                                                    </TableCell>\r\n                                                )}\r\n                                            </TableRow>\r\n                                        ))}\r\n                                    </TableBody>\r\n                                </Table>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </TabsContent>\r\n\r\n                {/* PRODUCTION TAB */}\r\n                <TabsContent value=\"production\" className=\"space-y-4\">\r\n                    <Card className=\"border-border/50\">\r\n                        <CardHeader>\r\n                            <CardTitle>Production Log</CardTitle>\r\n                            <CardDescription>History of all completed production batches.</CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"rounded-md border border-border\">\r\n                                <Table>\r\n                                    <TableHeader>\r\n                                        <TableRow className=\"bg-muted/5\">\r\n                                            <TableHead>Date</TableHead>\r\n                                            <TableHead>Batch ID</TableHead>\r\n                                            <TableHead>Product</TableHead>\r\n                                            <TableHead>Operator</TableHead>\r\n                                            <TableHead className=\"text-right\">Quantity</TableHead>\r\n                                            {isAdmin && <TableHead className=\"w-[50px]\"></TableHead>}\r\n                                        </TableRow>\r\n                                    </TableHeader>\r\n                                    <TableBody>\r\n                                        {productionHistory.length === 0 && (\r\n                                            <TableRow>\r\n                                                <TableCell colSpan={6} className=\"text-center py-10 text-muted-foreground\">\r\n                                                    No production records found.\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        )}\r\n                                        {productionHistory.map((log) => (\r\n                                            <TableRow key={log.id} className=\"hover:bg-muted/50 transition-colors\">\r\n                                                <TableCell className=\"font-mono text-sm text-muted-foreground\">{log.date}</TableCell>\r\n                                                <TableCell className=\"font-mono text-xs\">{log.batchId}</TableCell>\r\n                                                <TableCell className=\"font-medium\">{log.componentProduced}</TableCell>\r\n                                                <TableCell>{log.operator}</TableCell>\r\n                                                <TableCell className=\"text-right font-bold\">{log.quantityProduced}</TableCell>\r\n                                                {isAdmin && (\r\n                                                    <TableCell>\r\n                                                        <Button variant=\"ghost\" size=\"icon\" onClick={() => handleDeleteProduction(log.id)} className=\"h-8 w-8 text-red-500 hover:text-red-700 hover:bg-red-100\">\r\n                                                            <Trash2 className=\"h-4 w-4\" />\r\n                                                        </Button>\r\n                                                    </TableCell>\r\n                                                )}\r\n                                            </TableRow>\r\n                                        ))}\r\n                                    </TableBody>\r\n                                </Table>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </TabsContent>\r\n            </Tabs>\r\n\r\n            <Dialog open={isDispatchOpen} onOpenChange={setIsDispatchOpen}>\r\n                <DialogContent className=\"sm:max-w-[425px]\">\r\n                    <DialogHeader>\r\n                        <DialogTitle>Dispatch Stock</DialogTitle>\r\n                        <DialogDescription>\r\n                            Record a shipment to a customer or plating vendor.\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"grid gap-4 py-4\">\r\n                        <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                            <Label htmlFor=\"product\" className=\"text-right\">\r\n                                Product\r\n                            </Label>\r\n                            <Select\r\n                                value={dispatchForm.productName}\r\n                                onValueChange={(val) => setDispatchForm({ ...dispatchForm, productName: val })}\r\n                            >\r\n                                <SelectTrigger className=\"col-span-3\">\r\n                                    <SelectValue placeholder=\"Select Product\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {initialStock.map((p) => (\r\n                                        <SelectItem key={p.name} value={p.name}>{p.name} (Stock: {p.currentStock})</SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                            <Label htmlFor=\"quantity\" className=\"text-right\">\r\n                                Quantity\r\n                            </Label>\r\n                            <Input\r\n                                id=\"quantity\"\r\n                                type=\"number\"\r\n                                className=\"col-span-3\"\r\n                                value={dispatchForm.quantity}\r\n                                onChange={(e) => setDispatchForm({ ...dispatchForm, quantity: Number(e.target.value) })}\r\n                            />\r\n                        </div>\r\n                        <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                            <Label htmlFor=\"destination\" className=\"text-right\">\r\n                                To\r\n                            </Label>\r\n                            <Select\r\n                                value={dispatchForm.destination}\r\n                                onValueChange={(val) => setDispatchForm({ ...dispatchForm, destination: val as any })}\r\n                            >\r\n                                <SelectTrigger className=\"col-span-3\">\r\n                                    <SelectValue placeholder=\"Destination\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"Customer\">Customer</SelectItem>\r\n                                    <SelectItem value=\"Plating\">Plating Vendor</SelectItem>\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                            <Label htmlFor=\"detail\" className=\"text-right\">\r\n                                Detail\r\n                            </Label>\r\n                            <Input\r\n                                id=\"detail\"\r\n                                placeholder={dispatchForm.destination === 'Customer' ? \"Customer Name\" : \"Vendor Name\"}\r\n                                className=\"col-span-3\"\r\n                                value={dispatchForm.destinationDetail}\r\n                                onChange={(e) => setDispatchForm({ ...dispatchForm, destinationDetail: e.target.value })}\r\n                            />\r\n                        </div>\r\n                        <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                            <Label htmlFor=\"notes\" className=\"text-right\">\r\n                                Notes\r\n                            </Label>\r\n                            <Textarea\r\n                                id=\"notes\"\r\n                                className=\"col-span-3\"\r\n                                value={dispatchForm.notes}\r\n                                onChange={(e) => setDispatchForm({ ...dispatchForm, notes: e.target.value })}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <DialogFooter>\r\n                        <Button type=\"button\" variant=\"outline\" onClick={() => setIsDispatchOpen(false)}>Cancel</Button>\r\n                        <Button type=\"submit\" onClick={handleDispatchSubmit}>Record Dispatch</Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\nexus-dashboard-client.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":15,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":15,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Badge"},"fix":{"range":[408,456],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[997,1000],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[997,1000],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2234,2237],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2234,2237],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2753,2756],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2753,2756],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":70,"column":55,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3292,3336],"text":"Here&apos;s your manufacturing overview for today"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3292,3336],"text":"Here&lsquo;s your manufacturing overview for today"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3292,3336],"text":"Here&#39;s your manufacturing overview for today"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3292,3336],"text":"Here&rsquo;s your manufacturing overview for today"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport React from 'react';\r\nimport {\r\n    Box,\r\n    TrendingUp,\r\n    AlertTriangle,\r\n    Coins,\r\n    Package,\r\n    ArrowUpRight,\r\n    ArrowDownRight\r\n} from 'lucide-react';\r\nimport { Line, LineChart, ResponsiveContainer, Tooltip, XAxis, YAxis, BarChart, Bar, CartesianGrid } from 'recharts';\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\n\r\n// Mock Data for Charts (Placeholders as per design)\r\nconst productionTrendData = [\r\n    { day: 'Mon', value: 1.2 }, { day: 'Tue', value: 2.1 }, { day: 'Wed', value: 1.8 },\r\n    { day: 'Thu', value: 2.9 }, { day: 'Fri', value: 3.5 }, { day: 'Sat', value: 3.2 }, { day: 'Sun', value: 3.8 }\r\n];\r\n\r\nconst stockStatusData = [\r\n    { name: 'Optimal', value: 3.0, fill: '#1e40af' }, // Blue\r\n    { name: 'Low', value: 1.2, fill: '#f97316' }   // Orange\r\n];\r\n\r\nconst StatCard = ({ title, value, subtext, trend, trendUp, icon: Icon, colorClass }: any) => (\r\n    <Card className=\"flex flex-col justify-between shadow-sm hover:shadow-md transition-shadow\">\r\n        <CardContent className=\"p-6\">\r\n            <div className=\"flex justify-between items-start mb-4\">\r\n                <div className=\"space-y-1\">\r\n                    <p className=\"text-sm font-medium text-muted-foreground\">{title}</p>\r\n                    <h3 className=\"text-3xl font-bold tracking-tight\">{value}</h3>\r\n                </div>\r\n                <div className={`p-2 rounded-lg ${colorClass}`}>\r\n                    <Icon className=\"h-5 w-5\" />\r\n                </div>\r\n            </div>\r\n            <div className=\"space-y-1\">\r\n                <p className=\"text-xs text-muted-foreground\">{subtext}</p>\r\n                {trend && (\r\n                    <div className={`flex items-center text-xs font-medium ${trendUp ? 'text-emerald-600' : 'text-red-500'}`}>\r\n                        {trendUp ? <ArrowUpRight className=\"h-3 w-3 mr-1\" /> : <ArrowDownRight className=\"h-3 w-3 mr-1\" />}\r\n                        {trend}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </CardContent>\r\n    </Card>\r\n);\r\n\r\nexport function NexusDashboardClient({ initialReport }: { initialReport?: any }) {\r\n    // Determine today's date for display\r\n    const today = new Date().toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });\r\n\r\n    // Extract dynamic data from report if available, else placeholders\r\n    // Adapted to match generic report structure if fields are missing\r\n    const totalItems = initialReport?.inventory?.length || 0;\r\n    const todaysProduction = initialReport?.totalProduced || 0;\r\n    const lowStockCount = initialReport?.inventory?.filter((i: any) => i.currentStock < 50).length || 0;\r\n    const inventoryValue = \"$891.35\"; // Placeholder for now as value isn't in simple report\r\n\r\n    return (\r\n        <div className=\"space-y-6 pt-2 animate-in fade-in duration-500\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold tracking-tight text-slate-900\">Welcome back, Admin User</h1>\r\n                    <p className=\"text-slate-500\">Here's your manufacturing overview for today</p>\r\n                </div>\r\n                <div className=\"text-sm font-medium text-slate-400 bg-white px-4 py-2 rounded-md border border-slate-100 shadow-sm\">\r\n                    {today}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Summary Cards */}\r\n            <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-4\">\r\n                <StatCard\r\n                    title=\"Total Items\"\r\n                    value={totalItems}\r\n                    subtext=\"Fastener types in inventory\"\r\n                    trend=\"+12% from last week\"\r\n                    trendUp={true}\r\n                    icon={Box}\r\n                    colorClass=\"bg-blue-50 text-blue-600\"\r\n                />\r\n                <StatCard\r\n                    title=\"Today's Production\"\r\n                    value={todaysProduction}\r\n                    subtext=\"Units produced today\"\r\n                    trend=\"+8% from last week\"\r\n                    trendUp={true}\r\n                    icon={TrendingUp}\r\n                    colorClass=\"bg-emerald-50 text-emerald-600\"\r\n                />\r\n                <StatCard\r\n                    title=\"Low Stock Alerts\"\r\n                    value={lowStockCount}\r\n                    subtext=\"Items below minimum stock\"\r\n                    icon={AlertTriangle}\r\n                    colorClass=\"bg-orange-50 text-orange-600\"\r\n                />\r\n                <StatCard\r\n                    title=\"Inventory Value\"\r\n                    value={inventoryValue}\r\n                    subtext=\"Total stock value\"\r\n                    trend=\"+5% from last week\"\r\n                    trendUp={true}\r\n                    icon={Coins}\r\n                    colorClass=\"bg-indigo-50 text-indigo-600\"\r\n                />\r\n            </div>\r\n\r\n            {/* Charts Section */}\r\n            <div className=\"grid gap-6 md:grid-cols-2\">\r\n                {/* Production Trend Chart */}\r\n                <Card className=\"shadow-sm\">\r\n                    <CardHeader>\r\n                        <CardTitle className=\"flex items-center gap-2\">\r\n                            <TrendingUp className=\"h-5 w-5 text-blue-600\" />\r\n                            Production Trend (7 Days)\r\n                        </CardTitle>\r\n                        <CardDescription>Daily production output over the last week</CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent className=\"h-[300px]\">\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            <LineChart data={productionTrendData}>\r\n                                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#e2e8f0\" />\r\n                                <XAxis dataKey=\"day\" axisLine={false} tickLine={false} tick={{ fill: '#64748b', fontSize: 12 }} dy={10} />\r\n                                <YAxis axisLine={false} tickLine={false} tick={{ fill: '#64748b', fontSize: 12 }} />\r\n                                <Tooltip\r\n                                    contentStyle={{ borderRadius: '8px', border: 'none', boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)' }}\r\n                                    cursor={{ stroke: '#94a3b8', strokeWidth: 1 }}\r\n                                />\r\n                                <Line\r\n                                    type=\"monotone\"\r\n                                    dataKey=\"value\"\r\n                                    stroke=\"#2563eb\"\r\n                                    strokeWidth={3}\r\n                                    dot={{ r: 4, fill: \"#2563eb\", strokeWidth: 2, stroke: \"#fff\" }}\r\n                                    activeDot={{ r: 6 }}\r\n                                />\r\n                            </LineChart>\r\n                        </ResponsiveContainer>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                {/* Stock Status Chart */}\r\n                <Card className=\"shadow-sm\">\r\n                    <CardHeader>\r\n                        <CardTitle className=\"flex items-center gap-2\">\r\n                            <Package className=\"h-5 w-5 text-blue-600\" />\r\n                            Stock Status Overview\r\n                        </CardTitle>\r\n                        <CardDescription>Distribution of inventory stock levels</CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent className=\"h-[300px]\">\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            <BarChart data={stockStatusData}>\r\n                                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#e2e8f0\" />\r\n                                <XAxis dataKey=\"name\" axisLine={false} tickLine={false} tick={{ fill: '#64748b', fontSize: 12 }} dy={10} />\r\n                                <YAxis axisLine={false} tickLine={false} tick={{ fill: '#64748b', fontSize: 12 }} />\r\n                                <Tooltip\r\n                                    cursor={{ fill: '#f1f5f9' }}\r\n                                    contentStyle={{ borderRadius: '8px', border: 'none', boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)' }}\r\n                                />\r\n                                <Bar dataKey=\"value\" radius={[4, 4, 0, 0]} barSize={60} />\r\n                            </BarChart>\r\n                        </ResponsiveContainer>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\sidebar.tsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\sidebar.tsx:611:26\n  609 |   // Random width between 50 to 90%.\n  610 |   const width = React.useMemo(() => {\n> 611 |     return `${Math.floor(Math.random() * 40) + 50}%`\n      |                          ^^^^^^^^^^^^^ Cannot call impure function\n  612 |   }, [])\n  613 |\n  614 |   return (","line":611,"column":26,"nodeType":null,"endLine":611,"endColumn":39}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\n\nimport * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\nimport { Slot } from \"radix-ui\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]\"\n            : \"group-data-[collapsible=icon]:w-(--sidebar-width-icon)\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]\"\n            : \"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"size-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot.Root : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot.Root : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot.Root : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot.Root : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n        \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-(--skeleton-width) flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot.Root : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\sonner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\textarea.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":5,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":5,"endColumn":31,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[77,167],"text":"type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface TextareaProps\r\n    extends React.TextareaHTMLAttributes<HTMLTextAreaElement> { }\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n    ({ className, ...props }, ref) => {\r\n        return (\r\n            <textarea\r\n                className={cn(\r\n                    \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n                    className\r\n                )}\r\n                ref={ref}\r\n                {...props}\r\n            />\r\n        )\r\n    }\r\n)\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\hooks\\use-mobile.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\lib\\analysis.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ProductionRecord' is defined but never used.","line":1,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":26,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ProductionRecord"},"fix":{"range":[9,26],"text":""},"desc":"Remove unused variable \"ProductionRecord\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ProductionRecord, DailyReport, RawMaterialEntry, FinishedProductEntry } from \"@/types\";\r\nimport { ProductStock } from \"@/types/inventory\";\r\nimport { correlateData } from \"./data-engine\";\r\n\r\nexport const generateDailyReport = (\r\n    rawMaterials: RawMaterialEntry[],\r\n    finishedProducts: FinishedProductEntry[],\r\n    inventory: ProductStock[] = []\r\n): DailyReport => {\r\n    const records = correlateData(rawMaterials, finishedProducts);\r\n\r\n    const totalMaterialUsed = records.reduce((sum, r) => sum + r.rawMaterial.quantity, 0);\r\n    const totalProduced = records.reduce((sum, r) => sum + r.finishedProduct.quantity, 0);\r\n\r\n    // Calculate Average Efficiency\r\n    const averageEfficiency = records.length > 0\r\n        ? records.reduce((sum, r) => sum + r.efficiency, 0) / records.length\r\n        : 0;\r\n\r\n    const alerts: string[] = [];\r\n    const recommendations: string[] = [];\r\n\r\n    // --- Statistical Anomaly Detection ---\r\n    if (records.length > 1) {\r\n        const variance = records.reduce((sum, r) => sum + Math.pow(r.efficiency - averageEfficiency, 2), 0) / records.length;\r\n        const stdDev = Math.sqrt(variance);\r\n\r\n        // Flag records more than 1.5 SD below mean\r\n        records.forEach(r => {\r\n            if (r.efficiency < (averageEfficiency - 1.5 * stdDev)) {\r\n                r.status = 'critical';\r\n                alerts.push(`Anomaly Detect: Batch ${r.batchId} efficiency is significantly low (${r.efficiency.toFixed(1)}%).`);\r\n            }\r\n        });\r\n    }\r\n\r\n    // --- Heuristic \"AI\" Analysis ---\r\n\r\n    // 1. Efficiency Thresholds\r\n    if (averageEfficiency < 80) {\r\n        alerts.push(\"Warning: Overall production efficiency is below 80%.\");\r\n        recommendations.push(\"Investigate raw material quality for recent batches.\");\r\n    }\r\n\r\n    // 2. Waste Detection (High Input, Low Efficiency)\r\n    const highWasteBatches = records.filter(r => r.rawMaterial.quantity > 100 && r.efficiency < 75);\r\n    if (highWasteBatches.length > 0) {\r\n        recommendations.push(`Detected ${highWasteBatches.length} batches with high material usage but low yield. Check machine calibration.`);\r\n    }\r\n\r\n    // 3. Low Stock Alerts\r\n    inventory.forEach(item => {\r\n        if (item.currentStock < 50) { // Threshold could be configurable\r\n            alerts.push(`Low Stock: ${item.name} (${item.currentStock} units).`);\r\n        }\r\n    });\r\n\r\n    return {\r\n        date: new Date().toISOString(),\r\n        totalMaterialUsed,\r\n        totalProduced,\r\n        averageEfficiency,\r\n        records,\r\n        alerts: [...alerts, ...recommendations],\r\n        inventory\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\lib\\auth-context.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'password' is assigned a value but never used.","line":58,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'password' is assigned a value but never used.","line":95,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":95,"endColumn":29},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'publicRoutes'. Either include it or remove the dependency array.","line":175,"column":8,"nodeType":"ArrayExpression","endLine":175,"endColumn":43,"suggestions":[{"desc":"Update the dependencies array to be: [user, isLoading, pathname, router, publicRoutes]","fix":{"range":[6450,6485],"text":"[user, isLoading, pathname, router, publicRoutes]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { useRouter, usePathname } from \"next/navigation\";\r\n\r\n// --- Types ---\r\nexport type UserRole = 'ADMIN' | 'OPERATOR';\r\n\r\nexport type User = {\r\n    id: string;\r\n    username: string;\r\n    name: string;\r\n    role: UserRole;\r\n    password?: string;\r\n};\r\n\r\ninterface AuthContextType {\r\n    user: User | null;\r\n    users: User[];\r\n    isLoading: boolean;\r\n    login: (username: string, pass: string) => Promise<boolean>;\r\n    logout: () => void;\r\n    addUser: (user: Omit<User, \"id\">) => Promise<void>; // Changed to Promise\r\n    updateUser: (id: string, updates: Partial<Omit<User, \"id\">>) => Promise<void>; // Changed to Promise\r\n    deleteUser: (id: string) => Promise<void>; // Changed to Promise\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [users, setUsers] = useState<User[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const router = useRouter();\r\n    const pathname = usePathname();\r\n\r\n    // Shared public routes\r\n    const publicRoutes = React.useMemo(() => [\"/login\"], []);\r\n\r\n    // Load users and session\r\n    useEffect(() => {\r\n        const load = async () => {\r\n            setIsLoading(true);\r\n            try {\r\n                // Fetch users from API\r\n                const res = await fetch('/api/auth/users');\r\n                if (res.ok) {\r\n                    const loadedUsers = await res.json();\r\n                    setUsers(loadedUsers);\r\n\r\n                    // Load Current Session\r\n                    const storedSession = localStorage.getItem(\"auth_session\");\r\n                    if (storedSession) {\r\n                        const sessionUser = JSON.parse(storedSession);\r\n                        // Verify user still exists in list (in case they were deleted)\r\n                        const validUser = loadedUsers.find((u: User) => u.id === sessionUser.id);\r\n                        if (validUser) {\r\n                            const { password, ...userWithoutPass } = validUser;\r\n                            setUser(userWithoutPass as User);\r\n                        } else {\r\n                            localStorage.removeItem(\"auth_session\");\r\n                        }\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Failed to load users\", err);\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n        };\r\n        load();\r\n    }, []);\r\n\r\n    const login = async (username: string, pass: string): Promise<boolean> => {\r\n        // Simulate network delay\r\n        await new Promise(resolve => setTimeout(resolve, 500));\r\n\r\n        let validUser = users.find(u => u.username === username && u.password === pass);\r\n\r\n        // If not found locally, try fetching fresh list (in case of stale state)\r\n        if (!validUser) {\r\n            try {\r\n                const res = await fetch('/api/auth/users');\r\n                if (res.ok) {\r\n                    const freshUsers = await res.json();\r\n                    setUsers(freshUsers);\r\n                    validUser = freshUsers.find((u: User) => u.username === username && u.password === pass);\r\n                }\r\n            } catch (e) {\r\n                console.error(\"Login fetch error\", e);\r\n            }\r\n        }\r\n\r\n        if (validUser) {\r\n            const { password, ...userWithoutPass } = validUser; // Don't store password in session state\r\n            setUser(userWithoutPass as User);\r\n            localStorage.setItem(\"auth_session\", JSON.stringify(userWithoutPass));\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    const logout = () => {\r\n        setUser(null);\r\n        localStorage.removeItem(\"auth_session\");\r\n    };\r\n\r\n    const addUser = async (userData: Omit<User, \"id\">) => {\r\n        try {\r\n            const res = await fetch('/api/auth/users', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(userData)\r\n            });\r\n            if (res.ok) {\r\n                const newUser = await res.json();\r\n                setUsers([...users, newUser]);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to add user\", error);\r\n        }\r\n    };\r\n\r\n    const updateUser = async (id: string, updates: Partial<Omit<User, \"id\">>) => {\r\n        try {\r\n            const res = await fetch(`/api/auth/users/${id}`, {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(updates)\r\n            });\r\n            if (res.ok) {\r\n                const updatedUser = await res.json();\r\n                setUsers(users.map(u => u.id === id ? updatedUser : u));\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to update user\", error);\r\n        }\r\n    };\r\n\r\n    const deleteUser = async (id: string) => {\r\n        try {\r\n            const res = await fetch(`/api/auth/users/${id}`, { method: 'DELETE' });\r\n            if (res.ok) {\r\n                setUsers(users.filter(u => u.id !== id));\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to delete user\", error);\r\n        }\r\n    };\r\n\r\n    // Global Route Protection\r\n    useEffect(() => {\r\n        if (isLoading) return;\r\n\r\n        const isPublic = publicRoutes.includes(pathname);\r\n\r\n        if (!user && !isPublic) {\r\n            router.push(\"/login\");\r\n        } else if (user && isPublic) {\r\n            // If logged in and trying to go to login, redirect based on role\r\n            if (user.role === 'ADMIN') router.push(\"/\");\r\n            else router.push(\"/entry\");\r\n        } else if (user && user.role === 'OPERATOR') {\r\n            // Allow Operator to access Dashboard, Inventory, and Production Log\r\n            const allowedPaths = [\"/\", \"/inventory\", \"/entry\"];\r\n            const isAllowed = allowedPaths.some(path =>\r\n                path === \"/\" ? pathname === \"/\" : pathname.startsWith(path)\r\n            );\r\n\r\n            if (!isAllowed) {\r\n                // If they try to access admin pages (e.g., /settings, /admin), redirect to home\r\n                router.push(\"/\");\r\n            }\r\n        }\r\n    }, [user, isLoading, pathname, router]);\r\n\r\n    // Prevent hydration mismatch and flash of protected content\r\n    if (isLoading) {\r\n        return <div className=\"min-h-screen flex items-center justify-center bg-gray-50 border-gray-100\">\r\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n        </div>;\r\n    }\r\n\r\n    // Don't render children if we are about to redirect\r\n    const isPublic = publicRoutes.includes(pathname);\r\n    if (!user && !isPublic) return null; // Wait for redirect to /login\r\n\r\n    return (\r\n        <AuthContext.Provider value={{\r\n            user, users, isLoading,\r\n            login, logout,\r\n            addUser, updateUser, deleteUser\r\n        }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useAuth() {\r\n    const context = useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error(\"useAuth must be used within an AuthProvider\");\r\n    }\r\n    return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\lib\\crypto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\lib\\data-engine.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'API_URL' is assigned a value but never used.","line":4,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'materials' is assigned a value but never used.","line":23,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'products' is assigned a value but never used.","line":24,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1395,1398],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1395,1398],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1894,1897],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1894,1897],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { RawMaterialEntry, FinishedProductEntry, ProductionRecord } from \"@/types\";\r\nimport { ProductStock } from \"@/types/inventory\";\r\n\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000/api';\r\n\r\nexport const fetchData = async (): Promise<{ rawMaterials: RawMaterialEntry[], finishedProducts: FinishedProductEntry[], inventory: ProductStock[] }> => {\r\n    try {\r\n        const BASE_URL = process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000';\r\n\r\n        // Fetch from our internal API (requiring absolute URL on server)\r\n        const [matRes, prodRes, logsRes, invRes] = await Promise.all([\r\n            fetch(`${BASE_URL}/api/master/materials`),\r\n            fetch(`${BASE_URL}/api/master/products`),\r\n            fetch(`${BASE_URL}/api/production`),\r\n            fetch(`${BASE_URL}/api/inventory`)\r\n        ]);\r\n\r\n        if (!matRes.ok || !prodRes.ok) {\r\n            console.warn(\"Failed to fetch some data\");\r\n            return { rawMaterials: [], finishedProducts: [], inventory: [] };\r\n        }\r\n\r\n        const materials = await matRes.json();\r\n        const products = await prodRes.json();\r\n        const logs = await logsRes.ok ? await logsRes.json() : [];\r\n        const inventory = await invRes.ok ? await invRes.json() : [];\r\n\r\n        // MAPPING LOGIC (Adapting DB logs to UI types)\r\n        const rawMaterials: RawMaterialEntry[] = logs.map((log: any) => ({\r\n            id: `RM-${log.id || log.batchId}`, // Fallback ID\r\n            // Handle both old and new schema\r\n            materialName: log.rmUsed || log.materialName,\r\n            quantityUsed: log.rmQuantity || log.quantity,\r\n            batchId: log.batchId,\r\n            date: log.date,\r\n            operatorName: log.operator,\r\n            timestamp: log.timestamp || new Date().toISOString()\r\n        }));\r\n\r\n        const finishedProducts: FinishedProductEntry[] = logs.map((log: any) => ({\r\n            id: `FP-${log.id || log.batchId}`,\r\n            // Handle both old and new schema\r\n            productName: log.componentProduced || log.productName || 'Pending',\r\n            quantityProduced: log.quantityProduced || log.unitsProduced || 0,\r\n            batchId: log.batchId,\r\n            date: log.date,\r\n            operatorName: log.operator,\r\n            timestamp: log.timestamp || new Date().toISOString()\r\n        }));\r\n\r\n        return { rawMaterials, finishedProducts, inventory };\r\n\r\n    } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n        return { rawMaterials: [], finishedProducts: [], inventory: [] };\r\n    }\r\n};\r\n\r\nexport const correlateData = (rawMaterials: RawMaterialEntry[], finishedProducts: FinishedProductEntry[]): ProductionRecord[] => {\r\n    const records: ProductionRecord[] = [];\r\n\r\n    // Match by Batch ID primarily\r\n    rawMaterials.forEach(rm => {\r\n        const match = finishedProducts.find(fp => fp.batchId === rm.batchId);\r\n\r\n        if (match) {\r\n            const efficiency = (match.quantityProduced / rm.quantityUsed) * 100;\r\n            let status: 'optimal' | 'warning' | 'critical' = 'optimal';\r\n\r\n            // Simple heuristic for status\r\n            if (efficiency < 75) status = 'critical';\r\n            else if (efficiency < 85) status = 'warning';\r\n\r\n            records.push({\r\n                id: `${rm.id}-${match.id}`,\r\n                date: rm.date,\r\n                batchId: rm.batchId,\r\n                rawMaterial: { name: rm.materialName, quantity: rm.quantityUsed },\r\n                finishedProduct: { name: match.productName, quantity: match.quantityProduced },\r\n                efficiency,\r\n                status\r\n            });\r\n        }\r\n    });\r\n\r\n    return records;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\lib\\db.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'encrypt' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":17,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"encrypt"},"fix":{"range":[48,85],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[273,276],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[273,276],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[295,298],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[295,298],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[318,321],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[318,321],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[346,349],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[346,349],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[365,368],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[365,368],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import fs from 'fs';\r\nimport path from 'path';\r\nimport { encrypt } from './crypto';\r\n\r\n// Define the path to the JSON file\r\nconst DB_PATH = path.join(process.cwd(), 'data', 'db.json');\r\n\r\n// Interface for the Database Structure\r\nexport interface Database {\r\n    materials: any[];\r\n    products: any[];\r\n    operators: any[];\r\n    productionLogs: any[];\r\n    users: any[];\r\n}\r\n\r\n// Ensure the data directory and file exist\r\nif (!fs.existsSync(path.dirname(DB_PATH))) {\r\n    fs.mkdirSync(path.dirname(DB_PATH), { recursive: true });\r\n}\r\n\r\nif (!fs.existsSync(DB_PATH)) {\r\n    const initialData: Database = {\r\n        materials: [],\r\n        products: [],\r\n        operators: [],\r\n        productionLogs: [],\r\n        users: [\r\n            { id: \"u1\", username: \"admin\", password: \"password\", name: \"System Admin\", role: \"ADMIN\" },\r\n            { id: \"u2\", username: \"operator\", password: \"123\", name: \"John Operator\", role: \"OPERATOR\" }\r\n        ]\r\n    };\r\n    fs.writeFileSync(DB_PATH, JSON.stringify(initialData, null, 2), 'utf-8');\r\n}\r\n\r\n// Helper: Read the database\r\nexport const readDb = (): Database => {\r\n    try {\r\n        const fileContent = fs.readFileSync(DB_PATH, 'utf-8');\r\n        return JSON.parse(fileContent) as Database;\r\n    } catch (error) {\r\n        console.error(\"Error reading DB:\", error);\r\n        return { materials: [], products: [], operators: [], productionLogs: [], users: [] };\r\n    }\r\n};\r\n\r\n// Helper: Write to the database\r\nexport const writeDb = (data: Database): void => {\r\n    try {\r\n        // --- BACKUP LOGIC ---\r\n        const today = new Date().toISOString().split('T')[0];\r\n        const backupDir = path.join(process.cwd(), 'data', 'backups');\r\n        const backupPath = path.join(backupDir, `db-${today}.enc`);\r\n\r\n        if (!fs.existsSync(backupDir)) {\r\n            fs.mkdirSync(backupDir, { recursive: true });\r\n        }\r\n\r\n        // if backup for today doesn't exist, create one from CURRENT status of db.json\r\n        if (!fs.existsSync(backupPath) && fs.existsSync(DB_PATH)) {\r\n            try {\r\n                // We dynamically import crypto to avoid circular deps or issues if file is missing\r\n                // But here we can just require our crypto lib. \r\n                // Note: we can't easily use 'import' inside function in CJS/TS setup without async, \r\n                // but this file is likely TS/ESM. Let's assume we can add import at top or require.\r\n                // For simplicity/safety in this specific file structure, let's add import at top.\r\n            } catch (e) {\r\n                console.error(\"Backup check skipped\", e);\r\n            }\r\n        }\r\n\r\n        // We will move the logic to a separate function or just add it here\r\n        // But first let's just write the file to ensure app keeps working\r\n        fs.writeFileSync(DB_PATH, JSON.stringify(data, null, 2), 'utf-8');\r\n    } catch (error) {\r\n        console.error(\"Error writing DB:\", error);\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\lib\\master-data-context.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'defaultMaterials' is assigned a value but never used.","line":45,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'defaultProducts' is assigned a value but never used.","line":52,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'defaultOperators' is assigned a value but never used.","line":58,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isLoaded' is assigned a value but never used.","line":68,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":68,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4104,4107],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4104,4107],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\r\n\r\n// --- Types ---\r\nexport type Material = {\r\n    id: string;\r\n    name: string;\r\n    unit: string;\r\n    costPerUnit?: number;\r\n};\r\n\r\nexport type Product = {\r\n    id: string;\r\n    name: string;\r\n    type: 'FINISHED' | 'SEMI_FINISHED';\r\n    sku?: string;\r\n    minStockLevel?: number; // threshold for low stock alert\r\n};\r\n\r\nexport type Operator = {\r\n    id: string;\r\n    name: string;\r\n    role?: string;\r\n};\r\n\r\ninterface MasterDataContextType {\r\n    materials: Material[];\r\n    products: Product[];\r\n    operators: Operator[];\r\n    addMaterial: (material: Omit<Material, \"id\">) => void;\r\n    updateMaterial: (id: string, material: Partial<Material>) => void;\r\n    deleteMaterial: (id: string) => void;\r\n    addProduct: (product: Omit<Product, \"id\">) => void;\r\n    updateProduct: (id: string, product: Partial<Product>) => void;\r\n    deleteProduct: (id: string) => void;\r\n    addOperator: (operator: Omit<Operator, \"id\">) => void;\r\n    updateOperator: (id: string, operator: Partial<Operator>) => void;\r\n    deleteOperator: (id: string) => void;\r\n}\r\n\r\nconst MasterDataContext = createContext<MasterDataContextType | undefined>(undefined);\r\n\r\n// --- Default Data (Seed) ---\r\nconst defaultMaterials: Material[] = [\r\n    { id: \"RM-001\", name: \"Steel Sheet\", unit: \"kg\", costPerUnit: 2.5 },\r\n    { id: \"RM-002\", name: \"Plastic Granules\", unit: \"kg\", costPerUnit: 1.2 },\r\n    { id: \"RM-003\", name: \"Aluminum Ingot\", unit: \"kg\", costPerUnit: 4.0 },\r\n    { id: \"RM-004\", name: \"Paint (Red)\", unit: \"l\", costPerUnit: 15.0 },\r\n];\r\n\r\nconst defaultProducts: Product[] = [\r\n    { id: \"P-001\", name: \"Car Door Panel\", type: 'FINISHED', sku: \"CDP-2024\" },\r\n    { id: \"P-002\", name: \"Plastic Container\", type: 'FINISHED', sku: \"PC-500\" },\r\n    { id: \"P-003\", name: \"Engine Casing\", type: 'SEMI_FINISHED', sku: \"EC-V6\" },\r\n];\r\n\r\nconst defaultOperators: Operator[] = [\r\n    { id: \"OP-001\", name: \"John Doe\", role: \"Senior Operator\" },\r\n    { id: \"OP-002\", name: \"Jane Smith\", role: \"Inspector\" },\r\n    { id: \"OP-003\", name: \"Mike Ross\", role: \"Operator\" },\r\n];\r\n\r\nexport function MasterDataProvider({ children }: { children: React.ReactNode }) {\r\n    const [materials, setMaterials] = useState<Material[]>([]);\r\n    const [products, setProducts] = useState<Product[]>([]);\r\n    const [operators, setOperators] = useState<Operator[]>([]);\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n    // Use internal API routes\r\n    const API_URL = '/api';\r\n\r\n    // Load from API on mount\r\n    useEffect(() => {\r\n        const fetchMasterData = async () => {\r\n            try {\r\n                const [matRes, prodRes, opRes] = await Promise.all([\r\n                    fetch(`${API_URL}/master/materials`),\r\n                    fetch(`${API_URL}/master/products`),\r\n                    fetch(`${API_URL}/master/operators`)\r\n                ]);\r\n\r\n                if (matRes.ok) {\r\n                    const data = await matRes.json();\r\n                    setMaterials(Array.isArray(data) ? data : []);\r\n                }\r\n                if (prodRes.ok) {\r\n                    const data = await prodRes.json();\r\n                    setProducts(Array.isArray(data) ? data : []);\r\n                }\r\n                if (opRes.ok) {\r\n                    const data = await opRes.json();\r\n                    setOperators(Array.isArray(data) ? data : []);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Failed to fetch master data:\", error);\r\n                // Fallback to defaults if API fails?\r\n                // For now, we keep empty or maybe load from local storage as backup\r\n                // setMaterials(defaultMaterials);\r\n                // setProducts(defaultProducts);\r\n                // setOperators(defaultOperators);\r\n            } finally {\r\n                setIsLoaded(true);\r\n            }\r\n        };\r\n\r\n        fetchMasterData();\r\n    }, []);\r\n\r\n    // Helper for API writes (Basic implementation)\r\n    const syncToApi = async (endpoint: string, method: string, data: any) => {\r\n        try {\r\n            await fetch(`${API_URL}/master/${endpoint}`, {\r\n                method,\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(data)\r\n            });\r\n        } catch (error) {\r\n            console.error(`Failed to ${method} to ${endpoint}`, error);\r\n        }\r\n    };\r\n\r\n    // --- Actions ---\r\n    const addMaterial = (data: Omit<Material, \"id\">) => {\r\n        const newId = `RM-${Date.now().toString().slice(-4)}`;\r\n        const newItem = { ...data, id: newId };\r\n        setMaterials([...materials, newItem]);\r\n        syncToApi('materials', 'POST', newItem);\r\n    };\r\n\r\n    const updateMaterial = (id: string, data: Partial<Material>) => {\r\n        setMaterials(materials.map(m => m.id === id ? { ...m, ...data } : m));\r\n        syncToApi(`materials/${id}`, 'PUT', data);\r\n    };\r\n\r\n    const deleteMaterial = (id: string) => {\r\n        setMaterials(materials.filter(m => m.id !== id));\r\n        syncToApi(`materials/${id}`, 'DELETE', {});\r\n    };\r\n\r\n    const addProduct = (data: Omit<Product, \"id\">) => {\r\n        const newId = `P-${Date.now().toString().slice(-4)}`;\r\n        const newItem = { ...data, id: newId };\r\n        setProducts([...products, newItem]);\r\n        syncToApi('products', 'POST', newItem);\r\n    };\r\n\r\n    const updateProduct = (id: string, data: Partial<Product>) => {\r\n        setProducts(products.map(p => p.id === id ? { ...p, ...data } : p));\r\n        syncToApi(`products/${id}`, 'PUT', data);\r\n    };\r\n\r\n    const deleteProduct = (id: string) => {\r\n        setProducts(products.filter(p => p.id !== id));\r\n        syncToApi(`products/${id}`, 'DELETE', {});\r\n    };\r\n\r\n    const addOperator = (data: Omit<Operator, \"id\">) => {\r\n        const newId = `OP-${Date.now().toString().slice(-4)}`;\r\n        const newItem = { ...data, id: newId };\r\n        setOperators([...operators, newItem]);\r\n        syncToApi('operators', 'POST', newItem);\r\n    };\r\n\r\n    const deleteOperator = (id: string) => {\r\n        setOperators(operators.filter(op => op.id !== id));\r\n        syncToApi(`operators/${id}`, 'DELETE', {});\r\n    };\r\n\r\n    const updateOperator = (id: string, data: Partial<Operator>) => {\r\n        setOperators(operators.map(op => op.id === id ? { ...op, ...data } : op));\r\n        syncToApi(`operators/${id}`, 'PUT', data);\r\n    };\r\n\r\n    return (\r\n        <MasterDataContext.Provider value={{\r\n            materials, products, operators,\r\n            addMaterial, updateMaterial, deleteMaterial,\r\n            addProduct, updateProduct, deleteProduct,\r\n            addOperator, updateOperator, deleteOperator\r\n        }}>\r\n            {children}\r\n        </MasterDataContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useMasterData() {\r\n    const context = useContext(MasterDataContext);\r\n    if (context === undefined) {\r\n        throw new Error(\"useMasterData must be used within a MasterDataProvider\");\r\n    }\r\n    return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\lib\\project-validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\src\\types\\inventory.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rithi\\OneDrive\\Desktop\\raw material management\\production-monitor\\test-batch-id.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]